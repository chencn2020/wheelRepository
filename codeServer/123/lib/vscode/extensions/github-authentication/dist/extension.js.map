{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"vscode\"","webpack:///./src/common/logger.ts","webpack:///./src/githubServer.ts","webpack:///./node_modules/uuid/lib/rng.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./src/extension.ts","webpack:///./src/github.ts","webpack:///./src/common/keychain.ts","webpack:///external \"keytar\"","webpack:///external \"https\"","webpack:///./node_modules/uuid/index.js","webpack:///./node_modules/uuid/v1.js","webpack:///external \"crypto\"","webpack:///./node_modules/uuid/v4.js","webpack:///./src/common/utils.ts","webpack:///./src/common/clientRegistrar.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","vscode","padLeft","pad","repeat","Math","max","length","Logger","[object Object]","this","output","window","createOutputChannel","data","Error","stack","message","success","toString","logLevel","level","appendLine","now","data2String","Date","getUTCHours","getMinutes","getUTCSeconds","getMilliseconds","default","https","uuid","utils_1","logger_1","clientRegistrar_1","uriHandler","EventEmitter","uri","fire","exchangeCodeForToken","state","clientDetails","async","resolve","reject","info","query","split","reduce","prev","current","queryString","parseQuery","code","post","request","host","path","id","secret","method","headers","Accept","result","buffer","on","chunk","push","statusCode","json","JSON","parse","Buffer","concat","access_token","statusMessage","end","err","GitHubServer","scopes","callbackUri","env","asExternalUri","Uri","uriScheme","getClientDetails","encodeURIComponent","openExternal","promiseFromEvent","event","token","Promise","Authorization","User-Agent","accountName","login","crypto","randomBytes","byteToHex","substr","buf","offset","bth","join","github_1","githubServer_1","activate","context","subscriptions","registerUriHandler","loginService","GitHubAuthenticationProvider","initialize","authentication","registerAuthenticationProvider","displayName","onDidChangeSessions","getSessions","sessions","session","e","showErrorMessage","error","logout","deactivate","keychain_1","_sessions","_githubServer","readSessions","pollForChange","setTimeout","storedSessions","didChange","forEach","some","map","sessionIndex","findIndex","splice","keychain","getToken","getAccessToken","accessToken","sessionData","all","resolvedAccessToken","setToken","stringify","tokenToSession","userInfo","getUserInfo","storeSessions","vscode_1","SERVICE_ID","ACCOUNT_ID","Keychain","keytar","console","log","getKeytar","setPassword","getPassword","undefined","deletePassword","v1","v4","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","options","b","node","clockseq","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","Array","rnds","random","ii","filterEvent","filter","listener","thisArgs","disposables","onceEvent","dispose","passthrough","adapter","subscription","catch","then","Registrar","_config","OSS","INSIDERS","STABLE","EXPLORATION","VSO","VSO_PPE","VSO_DEV","details","scheme","authority","ClientRegistrar"],"mappings":"6DACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,mBClFAhC,EAAAD,QAAAkC,QAAA,yFCKA,MAAAC,EAAArC,EAAA,GA4CA,SAASsC,EAAQH,EAAWN,EAAWU,EAAM,KAC5C,OAAOA,EAAIC,OAAOC,KAAKC,IAAI,EAAGb,EAAIM,EAAEQ,SAAWR,EAGhD,MAAMS,EAAS,UAzCdC,cACCC,KAAKC,OAASV,EAAOW,OAAOC,oBAAoB,yBAGzCJ,YAAYK,GACnB,OAAIA,aAAgBC,MACZD,EAAKE,OAASF,EAAKG,SAEN,IAAjBH,EAAKI,SAAqBJ,EAAKG,QAC3BH,EAAKG,QAENH,EAAKK,WAGNV,KAAKQ,EAAiBH,GAC5BJ,KAAKU,SAAS,OAAQH,EAASH,GAGzBL,MAAMQ,EAAiBH,GAC7BJ,KAAKU,SAAS,QAASH,EAASH,GAG1BL,SAASY,EAAiBJ,EAAiBH,GACjDJ,KAAKC,OAAOW,eAAeD,QAAYX,KAAKa,UAAUN,KAClDH,GACHJ,KAAKC,OAAOW,WAAWZ,KAAKc,YAAYV,IAIlCL,MACP,MAAMc,EAAM,IAAIE,KAChB,OAAOvB,EAAQqB,EAAIG,cAAgB,GAAI,EAAG,KACvC,IAAMxB,EAAQqB,EAAII,aAAe,GAAI,EAAG,KACxC,IAAMzB,EAAQqB,EAAIK,gBAAkB,GAAI,EAAG,KAAO,IAAML,EAAIM,oBASjE/D,EAAAgE,QAAetB,iFCjDf,MAAAuB,EAAAnE,EAAA,GACAqC,EAAArC,EAAA,GACAoE,EAAApE,EAAA,IACAqE,EAAArE,EAAA,IACAsE,EAAAtE,EAAA,GACAuE,EAAAvE,EAAA,IAQaE,EAAAsE,WAAa,kBANInC,EAAOoC,aAC7B5B,UAAU6B,GAChB5B,KAAK6B,KAAKD,KAMZ,MAAME,EACL,CAACC,EAAOC,IAAkBC,MAAOL,EAAKM,EAASC,KAC9CX,EAAAJ,QAAOgB,KAAK,gCACZ,MAAMC,EAqCR,SAAoBT,GACnB,OAAOA,EAAIS,MAAMC,MAAM,KAAKC,OAAO,CAACC,EAAWC,KAC9C,MAAMC,EAAcD,EAAQH,MAAM,KAElC,OADAE,EAAKE,EAAY,IAAMA,EAAY,GAC5BF,OAzCOG,CAAWf,GACnBgB,EAAOP,EAAMO,KAEnB,GAAIP,EAAMN,QAAUA,EAEnB,YADAI,EAAO,6BAIR,MAAMU,EAAOxB,EAAMyB,SAClBC,KAAM,aACNC,4CAA6ChB,EAAciB,oBAAoBjB,EAAckB,gBAAgBb,EAAMN,cAAca,IACjIO,OAAQ,OACRC,SACCC,OAAQ,qBAEPC,IACF,MAAMC,KACND,EAAOE,GAAG,OAASC,IAClBF,EAAOG,KAAKD,KAEbH,EAAOE,GAAG,MAAO,KAChB,GAA0B,MAAtBF,EAAOK,WAAoB,CAC9B,MAAMC,EAAOC,KAAKC,MAAMC,OAAOC,OAAOT,GAAQ9C,YAC9Ce,EAAAJ,QAAOgB,KAAK,2BACZF,EAAQ0B,EAAKK,mBAEb9B,EAAO,IAAI9B,MAAMiD,EAAOY,oBAK3BrB,EAAKsB,MACLtB,EAAKW,GAAG,QAASY,IAChBjC,EAAOiC,MAYVhH,EAAAiH,mBACQtE,YAAYuE,GAClB9C,EAAAJ,QAAOgB,KAAK,iBACZ,MAAML,EAAQT,IACRiD,QAAoBhF,EAAOiF,IAAIC,cAAclF,EAAOmF,IAAIZ,SAASvE,EAAOiF,IAAIG,8DAC5E3C,EAAgBP,EAAAL,QAAgBwD,iBAAiBL,GACjD3C,EAAMrC,EAAOmF,IAAIZ,+DAA+De,mBAAmBN,EAAY9D,qBAAqB6D,WAAgBvC,eAAmBC,EAAciB,MAG3L,OADA1D,EAAOiF,IAAIM,aAAalD,GACjBL,EAAAwD,iBAAiB3H,EAAAsE,WAAWsD,MAAOlD,EAAqBC,EAAOC,IAGhEjC,kBAAkBkF,GACxB,OAAO,IAAIC,QAAQ,CAAChD,EAASC,KAC5BX,EAAAJ,QAAOgB,KAAK,2BACZ,MAAMS,EAAOxB,EAAMyB,SAClBC,KAAM,iBACNC,KAAM,QACNG,OAAQ,MACRC,SACC+B,uBAAwBF,IACxBG,aAAc,uBAEb9B,IACF,MAAMC,KACND,EAAOE,GAAG,OAASC,IAClBF,EAAOG,KAAKD,KAEbH,EAAOE,GAAG,MAAO,KAChB,GAA0B,MAAtBF,EAAOK,WAAoB,CAC9B,MAAMC,EAAOC,KAAKC,MAAMC,OAAOC,OAAOT,GAAQ9C,YAC9Ce,EAAAJ,QAAOgB,KAAK,qBACZF,GAAUe,GAAIW,EAAKX,GAAIoC,YAAazB,EAAK0B,aAEzCnD,EAAO,IAAI9B,MAAMiD,EAAOY,oBAK3BrB,EAAKsB,MACLtB,EAAKW,GAAG,QAASY,IAChBjC,EAAOiC,0BC1GX,IAAAmB,EAAArI,EAAA,IAEAG,EAAAD,QAAA,WACA,OAAAmI,EAAAC,YAAA,oBCDA,IADA,IAAAC,KACAnI,EAAA,EAAeA,EAAA,MAASA,EACxBmI,EAAAnI,MAAA,KAAAmD,SAAA,IAAAiF,OAAA,GAmBArI,EAAAD,QAhBA,SAAAuI,EAAAC,GACA,IAAAtI,EAAAsI,GAAA,EACAC,EAAAJ,EAEA,OACAI,EAAAF,EAAArI,MAAAuI,EAAAF,EAAArI,MACAuI,EAAAF,EAAArI,MAAAuI,EAAAF,EAAArI,MAAA,IACAuI,EAAAF,EAAArI,MAAAuI,EAAAF,EAAArI,MAAA,IACAuI,EAAAF,EAAArI,MAAAuI,EAAAF,EAAArI,MAAA,IACAuI,EAAAF,EAAArI,MAAAuI,EAAAF,EAAArI,MAAA,IACAuI,EAAAF,EAAArI,MAAAuI,EAAAF,EAAArI,MACAuI,EAAAF,EAAArI,MAAAuI,EAAAF,EAAArI,MACAuI,EAAAF,EAAArI,MAAAuI,EAAAF,EAAArI,OACAwI,KAAA,oFCjBA,MAAAvG,EAAArC,EAAA,GACA6I,EAAA7I,EAAA,GACA8I,EAAA9I,EAAA,GACAsE,EAAAtE,EAAA,GAEAE,EAAA6I,SAAOhE,eAAwBiE,GAE9BA,EAAQC,cAAczC,KAAKnE,EAAOW,OAAOkG,mBAAmBJ,EAAAtE,aAC5D,MAAM2E,EAAe,IAAIN,EAAAO,mCAEnBD,EAAaE,aAEnBhH,EAAOiH,eAAeC,gCACrBxD,GAAI,SACJyD,YAAa,SACbC,oBAAqBZ,EAAAY,oBAAoB3B,MACzC4B,YAAa,IAAM1B,QAAQhD,QAAQmE,EAAaQ,UAChDvB,MAAOrD,MAAOqC,IACb,IACC,MAAMwC,QAAgBT,EAAaf,MAAMhB,EAAOwB,KAAK,MAErD,OADAtE,EAAAJ,QAAOgB,KAAK,kBACL0E,EACN,MAAOC,GAGR,MAFAxH,EAAOW,OAAO8G,oCAAoCD,KAClDvF,EAAAJ,QAAO6F,MAAMF,GACPA,IAGRG,OAAQjF,MAAOgB,GACPoD,EAAaa,OAAOjE,MAQ9B7F,EAAA+J,WAAA,4FCrCA,MAAA5H,EAAArC,EAAA,GACAkK,EAAAlK,EAAA,GACA8I,EAAA9I,EAAA,GACAsE,EAAAtE,EAAA,GAEaE,EAAAuJ,oBAAsB,IAAIpH,EAAOoC,aAS9CvE,EAAAkJ,mCAAAvG,cACSC,KAAAqH,aACArH,KAAAsH,cAAgB,IAAItB,EAAA3B,aAErBtE,mBACNC,KAAKqH,gBAAkBrH,KAAKuH,eAC5BvH,KAAKwH,gBAGEzH,gBACP0H,WAAWxF,UACV,MAAMyF,QAAuB1H,KAAKuH,eAClC,IAAII,GAAY,EAEhBD,EAAeE,QAAQd,IACE9G,KAAKqH,UAAUQ,KAAKxI,GAAKA,EAAE4D,KAAO6D,EAAQ7D,MAGjEjD,KAAKqH,UAAU3D,KAAKoD,GACpBa,GAAY,KAId3H,KAAKqH,UAAUS,IAAIhB,IAGlB,IAFwBY,EAAeG,KAAKxI,GAAKA,EAAE4D,KAAO6D,EAAQ7D,IAE5C,CACrB,MAAM8E,EAAe/H,KAAKqH,UAAUW,UAAU3I,GAAKA,EAAE4D,KAAO6D,EAAQ7D,IAChE8E,GAAgB,GACnB/H,KAAKqH,UAAUY,OAAOF,EAAc,GAGrCJ,GAAY,KAIVA,GACHvK,EAAAuJ,oBAAoB9E,OAGrB7B,KAAKwH,iBACH,KAGIzH,qBACP,MAAM2H,QAAuBN,EAAAc,SAASC,WACtC,GAAIT,EACH,IAEC,OADmC7D,KAAKC,MAAM4D,GAC3BI,IAAIhB,KAErB7D,GAAI6D,EAAQ7D,GACZoC,YAAayB,EAAQzB,YACrBf,OAAQwC,EAAQxC,OAChB8D,eAAgB,IAAMlD,QAAQhD,QAAQ4E,EAAQuB,gBAG/C,MAAOtB,GACRvF,EAAAJ,QAAO6F,iCAAiCF,KAI1C,SAGOhH,sBACP,MAAMuI,QAAmCpD,QAAQqD,IAAIvI,KAAKqH,UAAUS,IAAI7F,MAAM6E,IAC7E,MAAM0B,QAA4B1B,EAAQsB,iBAC1C,OACCnF,GAAI6D,EAAQ7D,GACZoC,YAAayB,EAAQzB,YACrBf,OAAQwC,EAAQxC,OAChB+D,YAAaG,YAITpB,EAAAc,SAASO,SAAS5E,KAAK6E,UAAUJ,IAGxCzB,eACC,OAAO7G,KAAKqH,UAGNtH,YAAYuE,GAClB,MAAMW,QAAcjF,KAAKsH,cAAchC,MAAMhB,GACvCwC,QAAgB9G,KAAK2I,eAAe1D,EAAOX,EAAOhC,MAAM,MAE9D,aADMtC,KAAKyI,SAAS3B,GACbA,EAGA/G,qBAAqBkF,EAAeX,GAC3C,MAAMsE,QAAiB5I,KAAKsH,cAAcuB,YAAY5D,GACtD,OACChC,GAAI2F,EAAS3F,GACbmF,eAAgB,IAAMlD,QAAQhD,QAAQ+C,GACtCI,YAAauD,EAASvD,YACtBf,OAAQA,GAGFvE,eAAe+G,GACtB,MAAMiB,EAAe/H,KAAKqH,UAAUW,UAAU3I,GAAKA,EAAE4D,KAAO6D,EAAQ7D,IAChE8E,GAAgB,EACnB/H,KAAKqH,UAAUY,OAAOF,EAAc,EAAGjB,GAEvC9G,KAAKqH,UAAU3D,KAAKoD,GAGrB9G,KAAK8I,gBAGC/I,aAAakD,GACnB,MAAM8E,EAAe/H,KAAKqH,UAAUW,UAAUlB,GAAWA,EAAQ7D,KAAOA,GACpE8E,GAAgB,GACnB/H,KAAKqH,UAAUY,OAAOF,EAAc,GAGrC/H,KAAK8I,iGC/HP,MAAAC,EAAA7L,EAAA,GACAsE,EAAAtE,EAAA,GAkBA,MAAM8L,KAAgBD,EAAAvE,IAAIG,yBACpBsE,EAAa,gBAENC,EAGZnJ,cACC,MAAMoJ,EAvBR,WACC,IACC,OAAOjM,EAAQ,GACd,MAAOkH,GACRgF,QAAQC,IAAIjF,IAmBGkF,GACf,IAAKH,EACJ,MAAM,IAAI9I,MAAM,+BAGjBL,KAAKmJ,OAASA,EAGfpJ,eAAekF,GACd,IACC,aAAajF,KAAKmJ,OAAOI,YAAYP,EAAYC,EAAYhE,GAC5D,MAAO8B,GAERvF,EAAAJ,QAAO6F,+BAA+BF,MAIxChH,iBACC,IACC,aAAaC,KAAKmJ,OAAOK,YAAYR,EAAYC,GAChD,MAAOlC,GAGR,OADAvF,EAAAJ,QAAO6F,+BAA+BF,KAC/B7B,QAAQhD,aAAQuH,IAIzB1J,oBACC,IACC,aAAaC,KAAKmJ,OAAOO,eAAeV,EAAYC,GACnD,MAAOlC,GAGR,OADAvF,EAAAJ,QAAO6F,gCAAgCF,KAChC7B,QAAQhD,aAAQuH,KArC1BrM,EAAA8L,WA0Ca9L,EAAA8K,SAAW,IAAIgB,iBCxE5B7L,EAAAD,QAAAkC,QAAA,yBCAAjC,EAAAD,QAAAkC,QAAA,0BCAA,IAAAqK,EAAAzM,EAAA,IACA0M,EAAA1M,EAAA,IAEAoE,EAAAsI,EACAtI,EAAAqI,KACArI,EAAAsI,KAEAvM,EAAAD,QAAAkE,mBCPA,IAQAuI,EACAC,EATAC,EAAA7M,EAAA,GACA8M,EAAA9M,EAAA,GAWA+M,EAAA,EACAC,EAAA,EA+FA7M,EAAAD,QA5FA,SAAA+M,EAAAxE,EAAAC,GACA,IAAAtI,EAAAqI,GAAAC,GAAA,EACAwE,EAAAzE,MAGA0E,GADAF,SACAE,MAAAR,EACAS,OAAAb,IAAAU,EAAAG,SAAAH,EAAAG,SAAAR,EAKA,SAAAO,GAAA,MAAAC,EAAA,CACA,IAAAC,EAAAR,IACA,MAAAM,IAEAA,EAAAR,GACA,EAAAU,EAAA,GACAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,KAGA,MAAAD,IAEAA,EAAAR,EAAA,OAAAS,EAAA,MAAAA,EAAA,KAQA,IAAAC,OAAAf,IAAAU,EAAAK,MAAAL,EAAAK,OAAA,IAAAzJ,MAAA0J,UAIAC,OAAAjB,IAAAU,EAAAO,MAAAP,EAAAO,MAAAR,EAAA,EAGAS,EAAAH,EAAAP,GAAAS,EAAAR,GAAA,IAcA,GAXAS,EAAA,QAAAlB,IAAAU,EAAAG,WACAA,IAAA,UAKAK,EAAA,GAAAH,EAAAP,SAAAR,IAAAU,EAAAO,QACAA,EAAA,GAIAA,GAAA,IACA,UAAArK,MAAA,mDAGA4J,EAAAO,EACAN,EAAAQ,EACAZ,EAAAQ,EAMA,IAAAM,GAAA,gBAHAJ,GAAA,cAGAE,GAAA,WACAN,EAAA9M,KAAAsN,IAAA,OACAR,EAAA9M,KAAAsN,IAAA,OACAR,EAAA9M,KAAAsN,IAAA,MACAR,EAAA9M,KAAA,IAAAsN,EAGA,IAAAC,EAAAL,EAAA,yBACAJ,EAAA9M,KAAAuN,IAAA,MACAT,EAAA9M,KAAA,IAAAuN,EAGAT,EAAA9M,KAAAuN,IAAA,SACAT,EAAA9M,KAAAuN,IAAA,OAGAT,EAAA9M,KAAAgN,IAAA,MAGAF,EAAA9M,KAAA,IAAAgN,EAGA,QAAAvL,EAAA,EAAiBA,EAAA,IAAOA,EACxBqL,EAAA9M,EAAAyB,GAAAsL,EAAAtL,GAGA,OAAA4G,GAAAqE,EAAAI,mBCzGA/M,EAAAD,QAAAkC,QAAA,2BCAA,IAAAyK,EAAA7M,EAAA,GACA8M,EAAA9M,EAAA,GA2BAG,EAAAD,QAzBA,SAAA+M,EAAAxE,EAAAC,GACA,IAAAtI,EAAAqI,GAAAC,GAAA,EAEA,qBACAD,EAAA,WAAAwE,EAAA,IAAAW,MAAA,SACAX,EAAA,MAIA,IAAAY,GAFAZ,SAEAa,SAAAb,EAAAJ,UAOA,GAJAgB,EAAA,MAAAA,EAAA,MACAA,EAAA,MAAAA,EAAA,OAGApF,EACA,QAAAsF,EAAA,EAAoBA,EAAA,KAASA,EAC7BtF,EAAArI,EAAA2N,GAAAF,EAAAE,GAIA,OAAAtF,GAAAqE,EAAAe,mFClBA3N,EAAA8N,YAAA,SAA+BlG,EAAiBmG,GAC/C,MAAO,CAACC,EAAUC,EAAW,KAAMC,IAAiBtG,EAAM+B,GAAKoE,EAAOpE,IAAMqE,EAAS3N,KAAK4N,EAAUtE,GAAI,KAAMuE,IAG/GlO,EAAAmO,UAAA,SAA6BvG,GAC5B,MAAO,CAACoG,EAAUC,EAAW,KAAMC,KAClC,MAAMhI,EAAS0B,EAAM+B,IACpBzD,EAAOkI,UACAJ,EAAS3N,KAAK4N,EAAUtE,IAC7B,KAAMuE,GAET,OAAOhI,IAeT,MAAMmI,EAAc,CAAClN,EAAY2D,IAAmCA,EAAQ3D,GAgB5EnB,EAAA2H,iBAAO9C,eACN+C,EACA0G,EAAgCD,GAChC,IAAIE,EACJ,OAAO,IAAIzG,QAAW,CAAChD,EAASC,IAC/BwJ,EAAe3G,EAAOzG,IACrB,IACC2G,QAAQhD,QAAQwJ,EAAQnN,EAAO2D,EAASC,IACtCyJ,MAAMzJ,GACP,MAAO8E,GACR9E,EAAO8E,OAGR4E,KACAvI,IACAqI,EAAaH,UACNlI,GAER2D,IAEC,MADA0E,EAAaH,UACPvE,0FC9CI6E,EAGZ/L,cACC,IACCC,KAAK+L,QAAU7O,EAAQ,IACtB,MAAO6J,GACR/G,KAAK+L,SACJC,OACAC,YACAC,UACAC,eACAC,OACAC,WACAC,aAIHvM,iBAAiBwE,GAChB,IAAIgI,EACJ,OAAQhI,EAAYiI,QACnB,IAAK,WACJD,EAAUvM,KAAK+L,QAAQC,IACvB,MAED,IAAK,kBACJO,EAAUvM,KAAK+L,QAAQE,SACvB,MAED,IAAK,SACJM,EAAUvM,KAAK+L,QAAQG,OACvB,MAED,IAAK,qBACJK,EAAUvM,KAAK+L,QAAQI,YACvB,MAED,IAAK,QACJ,OAAQ5H,EAAYkI,WACnB,IAAK,0BACJF,EAAUvM,KAAK+L,QAAQK,IACvB,MACD,IAAK,6CACJG,EAAUvM,KAAK+L,QAAQM,QACvB,MACD,IAAK,6CACJE,EAAUvM,KAAK+L,QAAQO,QAI1B,QACC,MAAM,IAAIjM,+BAA+BkE,KAG3C,IAAKgI,EAAQtJ,KAAOsJ,EAAQrJ,OAC3B,MAAM,IAAI7C,+CAA+CkE,KAG1D,OAAOgI,GA1DTnP,EAAA0O,YA8DA,MAAMY,EAAkB,IAAIZ,EAC5B1O,EAAAgE,QAAesL","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","module.exports = require(\"vscode\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\ntype LogLevel = 'Trace' | 'Info' | 'Error';\n\nclass Log {\n\tprivate output: vscode.OutputChannel;\n\n\tconstructor() {\n\t\tthis.output = vscode.window.createOutputChannel('GitHub Authentication');\n\t}\n\n\tprivate data2String(data: any): string {\n\t\tif (data instanceof Error) {\n\t\t\treturn data.stack || data.message;\n\t\t}\n\t\tif (data.success === false && data.message) {\n\t\t\treturn data.message;\n\t\t}\n\t\treturn data.toString();\n\t}\n\n\tpublic info(message: string, data?: any): void {\n\t\tthis.logLevel('Info', message, data);\n\t}\n\n\tpublic error(message: string, data?: any): void {\n\t\tthis.logLevel('Error', message, data);\n\t}\n\n\tpublic logLevel(level: LogLevel, message: string, data?: any): void {\n\t\tthis.output.appendLine(`[${level}  - ${this.now()}] ${message}`);\n\t\tif (data) {\n\t\t\tthis.output.appendLine(this.data2String(data));\n\t\t}\n\t}\n\n\tprivate now(): string {\n\t\tconst now = new Date();\n\t\treturn padLeft(now.getUTCHours() + '', 2, '0')\n\t\t\t+ ':' + padLeft(now.getMinutes() + '', 2, '0')\n\t\t\t+ ':' + padLeft(now.getUTCSeconds() + '', 2, '0') + '.' + now.getMilliseconds();\n\t}\n}\n\nfunction padLeft(s: string, n: number, pad = ' ') {\n\treturn pad.repeat(Math.max(0, n - s.length)) + s;\n}\n\nconst Logger = new Log();\nexport default Logger;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as https from 'https';\nimport * as vscode from 'vscode';\nimport * as uuid from 'uuid';\nimport { PromiseAdapter, promiseFromEvent } from './common/utils';\nimport Logger from './common/logger';\nimport ClientRegistrar, { ClientDetails } from './common/clientRegistrar';\n\nclass UriEventHandler extends vscode.EventEmitter<vscode.Uri> implements vscode.UriHandler {\n\tpublic handleUri(uri: vscode.Uri) {\n\t\tthis.fire(uri);\n\t}\n}\n\nexport const uriHandler = new UriEventHandler;\n\nconst exchangeCodeForToken: (state: string, clientDetails: ClientDetails) => PromiseAdapter<vscode.Uri, string> =\n\t(state, clientDetails) => async (uri, resolve, reject) => {\n\t\tLogger.info('Exchanging code for token...');\n\t\tconst query = parseQuery(uri);\n\t\tconst code = query.code;\n\n\t\tif (query.state !== state) {\n\t\t\treject('Received mismatched state');\n\t\t\treturn;\n\t\t}\n\n\t\tconst post = https.request({\n\t\t\thost: 'github.com',\n\t\t\tpath: `/login/oauth/access_token?client_id=${clientDetails.id}&client_secret=${clientDetails.secret}&state=${query.state}&code=${code}`,\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json'\n\t\t\t}\n\t\t}, result => {\n\t\t\tconst buffer: Buffer[] = [];\n\t\t\tresult.on('data', (chunk: Buffer) => {\n\t\t\t\tbuffer.push(chunk);\n\t\t\t});\n\t\t\tresult.on('end', () => {\n\t\t\t\tif (result.statusCode === 200) {\n\t\t\t\t\tconst json = JSON.parse(Buffer.concat(buffer).toString());\n\t\t\t\t\tLogger.info('Token exchange success!');\n\t\t\t\t\tresolve(json.access_token);\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error(result.statusMessage));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tpost.end();\n\t\tpost.on('error', err => {\n\t\t\treject(err);\n\t\t});\n\t};\n\nfunction parseQuery(uri: vscode.Uri) {\n\treturn uri.query.split('&').reduce((prev: any, current) => {\n\t\tconst queryString = current.split('=');\n\t\tprev[queryString[0]] = queryString[1];\n\t\treturn prev;\n\t}, {});\n}\n\nexport class GitHubServer {\n\tpublic async login(scopes: string): Promise<string> {\n\t\tLogger.info('Logging in...');\n\t\tconst state = uuid();\n\t\tconst callbackUri = await vscode.env.asExternalUri(vscode.Uri.parse(`${vscode.env.uriScheme}://vscode.github-authentication/did-authenticate`));\n\t\tconst clientDetails = ClientRegistrar.getClientDetails(callbackUri);\n\t\tconst uri = vscode.Uri.parse(`https://github.com/login/oauth/authorize?redirect_uri=${encodeURIComponent(callbackUri.toString())}&scope=${scopes}&state=${state}&client_id=${clientDetails.id}`);\n\n\t\tvscode.env.openExternal(uri);\n\t\treturn promiseFromEvent(uriHandler.event, exchangeCodeForToken(state, clientDetails));\n\t}\n\n\tpublic async getUserInfo(token: string): Promise<{ id: string, accountName: string }> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tLogger.info('Getting account info...');\n\t\t\tconst post = https.request({\n\t\t\t\thost: 'api.github.com',\n\t\t\t\tpath: `/user`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `token ${token}`,\n\t\t\t\t\t'User-Agent': 'Visual-Studio-Code'\n\t\t\t\t}\n\t\t\t}, result => {\n\t\t\t\tconst buffer: Buffer[] = [];\n\t\t\t\tresult.on('data', (chunk: Buffer) => {\n\t\t\t\t\tbuffer.push(chunk);\n\t\t\t\t});\n\t\t\t\tresult.on('end', () => {\n\t\t\t\t\tif (result.statusCode === 200) {\n\t\t\t\t\t\tconst json = JSON.parse(Buffer.concat(buffer).toString());\n\t\t\t\t\t\tLogger.info('Got account info!');\n\t\t\t\t\t\tresolve({ id: json.id, accountName: json.login });\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error(result.statusMessage));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tpost.end();\n\t\t\tpost.on('error', err => {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\t}\n}\n","// Unique ID creation requires a high quality random # generator.  In node.js\n// this is pretty straight-forward - we use the crypto API.\n\nvar crypto = require('crypto');\n\nmodule.exports = function nodeRNG() {\n  return crypto.randomBytes(16);\n};\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { GitHubAuthenticationProvider, onDidChangeSessions } from './github';\nimport { uriHandler } from './githubServer';\nimport Logger from './common/logger';\n\nexport async function activate(context: vscode.ExtensionContext) {\n\n\tcontext.subscriptions.push(vscode.window.registerUriHandler(uriHandler));\n\tconst loginService = new GitHubAuthenticationProvider();\n\n\tawait loginService.initialize();\n\n\tvscode.authentication.registerAuthenticationProvider({\n\t\tid: 'github',\n\t\tdisplayName: 'GitHub',\n\t\tonDidChangeSessions: onDidChangeSessions.event,\n\t\tgetSessions: () => Promise.resolve(loginService.sessions),\n\t\tlogin: async (scopes: string[]) => {\n\t\t\ttry {\n\t\t\t\tconst session = await loginService.login(scopes.join(' '));\n\t\t\t\tLogger.info('Login success!');\n\t\t\t\treturn session;\n\t\t\t} catch (e) {\n\t\t\t\tvscode.window.showErrorMessage(`Sign in failed: ${e}`);\n\t\t\t\tLogger.error(e);\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t},\n\t\tlogout: async (id: string) => {\n\t\t\treturn loginService.logout(id);\n\t\t}\n\t});\n\n\treturn;\n}\n\n// this method is called when your extension is deactivated\nexport function deactivate() { }\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { keychain } from './common/keychain';\nimport { GitHubServer } from './githubServer';\nimport Logger from './common/logger';\n\nexport const onDidChangeSessions = new vscode.EventEmitter<void>();\n\ninterface SessionData {\n\tid: string;\n\taccountName: string;\n\tscopes: string[];\n\taccessToken: string;\n}\n\nexport class GitHubAuthenticationProvider {\n\tprivate _sessions: vscode.AuthenticationSession[] = [];\n\tprivate _githubServer = new GitHubServer();\n\n\tpublic async initialize(): Promise<void> {\n\t\tthis._sessions = await this.readSessions();\n\t\tthis.pollForChange();\n\t}\n\n\tprivate pollForChange() {\n\t\tsetTimeout(async () => {\n\t\t\tconst storedSessions = await this.readSessions();\n\t\t\tlet didChange = false;\n\n\t\t\tstoredSessions.forEach(session => {\n\t\t\t\tconst matchesExisting = this._sessions.some(s => s.id === session.id);\n\t\t\t\t// Another window added a session to the keychain, add it to our state as well\n\t\t\t\tif (!matchesExisting) {\n\t\t\t\t\tthis._sessions.push(session);\n\t\t\t\t\tdidChange = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._sessions.map(session => {\n\t\t\t\tconst matchesExisting = storedSessions.some(s => s.id === session.id);\n\t\t\t\t// Another window has logged out, remove from our state\n\t\t\t\tif (!matchesExisting) {\n\t\t\t\t\tconst sessionIndex = this._sessions.findIndex(s => s.id === session.id);\n\t\t\t\t\tif (sessionIndex > -1) {\n\t\t\t\t\t\tthis._sessions.splice(sessionIndex, 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tdidChange = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (didChange) {\n\t\t\t\tonDidChangeSessions.fire();\n\t\t\t}\n\n\t\t\tthis.pollForChange();\n\t\t}, 1000 * 30);\n\t}\n\n\tprivate async readSessions(): Promise<vscode.AuthenticationSession[]> {\n\t\tconst storedSessions = await keychain.getToken();\n\t\tif (storedSessions) {\n\t\t\ttry {\n\t\t\t\tconst sessionData: SessionData[] = JSON.parse(storedSessions);\n\t\t\t\treturn sessionData.map(session => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: session.id,\n\t\t\t\t\t\taccountName: session.accountName,\n\t\t\t\t\t\tscopes: session.scopes,\n\t\t\t\t\t\tgetAccessToken: () => Promise.resolve(session.accessToken)\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tLogger.error(`Error reading sessions: ${e}`);\n\t\t\t}\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tprivate async storeSessions(): Promise<void> {\n\t\tconst sessionData: SessionData[] = await Promise.all(this._sessions.map(async session => {\n\t\t\tconst resolvedAccessToken = await session.getAccessToken();\n\t\t\treturn {\n\t\t\t\tid: session.id,\n\t\t\t\taccountName: session.accountName,\n\t\t\t\tscopes: session.scopes,\n\t\t\t\taccessToken: resolvedAccessToken\n\t\t\t};\n\t\t}));\n\n\t\tawait keychain.setToken(JSON.stringify(sessionData));\n\t}\n\n\tget sessions(): vscode.AuthenticationSession[] {\n\t\treturn this._sessions;\n\t}\n\n\tpublic async login(scopes: string): Promise<vscode.AuthenticationSession> {\n\t\tconst token = await this._githubServer.login(scopes);\n\t\tconst session = await this.tokenToSession(token, scopes.split(' '));\n\t\tawait this.setToken(session);\n\t\treturn session;\n\t}\n\n\tprivate async tokenToSession(token: string, scopes: string[]): Promise<vscode.AuthenticationSession> {\n\t\tconst userInfo = await this._githubServer.getUserInfo(token);\n\t\treturn {\n\t\t\tid: userInfo.id,\n\t\t\tgetAccessToken: () => Promise.resolve(token),\n\t\t\taccountName: userInfo.accountName,\n\t\t\tscopes: scopes\n\t\t};\n\t}\n\tprivate async setToken(session: vscode.AuthenticationSession): Promise<void> {\n\t\tconst sessionIndex = this._sessions.findIndex(s => s.id === session.id);\n\t\tif (sessionIndex > -1) {\n\t\t\tthis._sessions.splice(sessionIndex, 1, session);\n\t\t} else {\n\t\t\tthis._sessions.push(session);\n\t\t}\n\n\t\tthis.storeSessions();\n\t}\n\n\tpublic async logout(id: string) {\n\t\tconst sessionIndex = this._sessions.findIndex(session => session.id === id);\n\t\tif (sessionIndex > -1) {\n\t\t\tthis._sessions.splice(sessionIndex, 1);\n\t\t}\n\n\t\tthis.storeSessions();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// keytar depends on a native module shipped in vscode, so this is\n// how we load it\nimport * as keytarType from 'keytar';\nimport { env } from 'vscode';\nimport Logger from './logger';\n\nfunction getKeytar(): Keytar | undefined {\n\ttry {\n\t\treturn require('keytar');\n\t} catch (err) {\n\t\tconsole.log(err);\n\t}\n\n\treturn undefined;\n}\n\nexport type Keytar = {\n\tgetPassword: typeof keytarType['getPassword'];\n\tsetPassword: typeof keytarType['setPassword'];\n\tdeletePassword: typeof keytarType['deletePassword'];\n};\n\nconst SERVICE_ID = `${env.uriScheme}-github.login`;\nconst ACCOUNT_ID = 'account';\n\nexport class Keychain {\n\tprivate keytar: Keytar;\n\n\tconstructor() {\n\t\tconst keytar = getKeytar();\n\t\tif (!keytar) {\n\t\t\tthrow new Error('System keychain unavailable');\n\t\t}\n\n\t\tthis.keytar = keytar;\n\t}\n\n\tasync setToken(token: string): Promise<void> {\n\t\ttry {\n\t\t\treturn await this.keytar.setPassword(SERVICE_ID, ACCOUNT_ID, token);\n\t\t} catch (e) {\n\t\t\t// Ignore\n\t\t\tLogger.error(`Setting token failed: ${e}`);\n\t\t}\n\t}\n\n\tasync getToken(): Promise<string | null | undefined> {\n\t\ttry {\n\t\t\treturn await this.keytar.getPassword(SERVICE_ID, ACCOUNT_ID);\n\t\t} catch (e) {\n\t\t\t// Ignore\n\t\t\tLogger.error(`Getting token failed: ${e}`);\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\t}\n\n\tasync deleteToken(): Promise<boolean | undefined> {\n\t\ttry {\n\t\t\treturn await this.keytar.deletePassword(SERVICE_ID, ACCOUNT_ID);\n\t\t} catch (e) {\n\t\t\t// Ignore\n\t\t\tLogger.error(`Deleting token failed: ${e}`);\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\t}\n}\n\nexport const keychain = new Keychain();\n","module.exports = require(\"keytar\");","module.exports = require(\"https\");","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","module.exports = require(\"crypto\");","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Disposable } from 'vscode';\n\nexport function filterEvent<T>(event: Event<T>, filter: (e: T) => boolean): Event<T> {\n\treturn (listener, thisArgs = null, disposables?) => event(e => filter(e) && listener.call(thisArgs, e), null, disposables);\n}\n\nexport function onceEvent<T>(event: Event<T>): Event<T> {\n\treturn (listener, thisArgs = null, disposables?) => {\n\t\tconst result = event(e => {\n\t\t\tresult.dispose();\n\t\t\treturn listener.call(thisArgs, e);\n\t\t}, null, disposables);\n\n\t\treturn result;\n\t};\n}\n\n\nexport interface PromiseAdapter<T, U> {\n\t(\n\t\tvalue: T,\n\t\tresolve:\n\t\t\t(value?: U | PromiseLike<U>) => void,\n\t\treject:\n\t\t\t(reason: any) => void\n\t): any;\n}\n\nconst passthrough = (value: any, resolve: (value?: any) => void) => resolve(value);\n\n/**\n * Return a promise that resolves with the next emitted event, or with some future\n * event as decided by an adapter.\n *\n * If specified, the adapter is a function that will be called with\n * `(event, resolve, reject)`. It will be called once per event until it resolves or\n * rejects.\n *\n * The default adapter is the passthrough function `(value, resolve) => resolve(value)`.\n *\n * @param event the event\n * @param adapter controls resolution of the returned promise\n * @returns a promise that resolves or rejects as specified by the adapter\n */\nexport async function promiseFromEvent<T, U>(\n\tevent: Event<T>,\n\tadapter: PromiseAdapter<T, U> = passthrough): Promise<U> {\n\tlet subscription: Disposable;\n\treturn new Promise<U>((resolve, reject) =>\n\t\tsubscription = event((value: T) => {\n\t\t\ttry {\n\t\t\t\tPromise.resolve(adapter(value, resolve, reject))\n\t\t\t\t\t.catch(reject);\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t}\n\t\t})\n\t).then(\n\t\t(result: U) => {\n\t\t\tsubscription.dispose();\n\t\t\treturn result;\n\t\t},\n\t\terror => {\n\t\t\tsubscription.dispose();\n\t\t\tthrow error;\n\t\t}\n\t);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Uri } from 'vscode';\n\nexport interface ClientDetails {\n\tid?: string;\n\tsecret?: string;\n}\n\nexport interface ClientConfig {\n\tOSS: ClientDetails;\n\tINSIDERS: ClientDetails;\n\tSTABLE: ClientDetails;\n\tEXPLORATION: ClientDetails;\n\n\tVSO: ClientDetails;\n\tVSO_PPE: ClientDetails;\n\tVSO_DEV: ClientDetails;\n}\n\nexport class Registrar {\n\tprivate _config: ClientConfig;\n\n\tconstructor() {\n\t\ttry {\n\t\t\tthis._config = require('./config.json') as ClientConfig;\n\t\t} catch (e) {\n\t\t\tthis._config = {\n\t\t\t\tOSS: {},\n\t\t\t\tINSIDERS: {},\n\t\t\t\tSTABLE: {},\n\t\t\t\tEXPLORATION: {},\n\t\t\t\tVSO: {},\n\t\t\t\tVSO_PPE: {},\n\t\t\t\tVSO_DEV: {}\n\t\t\t};\n\t\t}\n\t}\n\tgetClientDetails(callbackUri: Uri): ClientDetails {\n\t\tlet details: ClientDetails | undefined;\n\t\tswitch (callbackUri.scheme) {\n\t\t\tcase 'code-oss':\n\t\t\t\tdetails = this._config.OSS;\n\t\t\t\tbreak;\n\n\t\t\tcase 'vscode-insiders':\n\t\t\t\tdetails = this._config.INSIDERS;\n\t\t\t\tbreak;\n\n\t\t\tcase 'vscode':\n\t\t\t\tdetails = this._config.STABLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 'vscode-exploration':\n\t\t\t\tdetails = this._config.EXPLORATION;\n\t\t\t\tbreak;\n\n\t\t\tcase 'https':\n\t\t\t\tswitch (callbackUri.authority) {\n\t\t\t\t\tcase 'online.visualstudio.com':\n\t\t\t\t\t\tdetails = this._config.VSO;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'online-ppe.core.vsengsaas.visualstudio.com':\n\t\t\t\t\t\tdetails = this._config.VSO_PPE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'online.dev.core.vsengsaas.visualstudio.com':\n\t\t\t\t\t\tdetails = this._config.VSO_DEV;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error(`Unrecognized callback ${callbackUri}`);\n\t\t}\n\n\t\tif (!details.id || !details.secret) {\n\t\t\tthrow new Error(`No client configuration available for ${callbackUri}`);\n\t\t}\n\n\t\treturn details;\n\t}\n}\n\nconst ClientRegistrar = new Registrar();\nexport default ClientRegistrar;\n"],"sourceRoot":""}