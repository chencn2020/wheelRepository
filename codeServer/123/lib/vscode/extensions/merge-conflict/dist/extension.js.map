{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"vscode\"","webpack:///external \"path\"","webpack:///./node_modules/vscode-nls/lib/main.js","webpack:///./src/contentProvider.ts","webpack:///./src/extension.ts","webpack:///./src/services.ts","webpack:///./src/documentTracker.ts","webpack:///./src/mergeConflictParser.ts","webpack:///./src/documentMergeConflict.ts","webpack:///./src/delayer.ts","webpack:///./src/codelensProvider.ts","webpack:///external \"fs\"","webpack:///./src/commandHandler.ts","webpack:///./src/mergeDecorator.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","MessageFormat","LocalizeInfo","resolvedBundles","options","isPseudo","path","fs","toString","isDefined","isString","readJsonFileSync","filename","JSON","parse","readFileSync","format","message","args","replace","length","match","rest","index","arg","replaced","String","createScopedLocalizeFunction","messages","_i","arguments","isNumber","console","error","Error","stack","warn","localize","cacheBundle","bundle","loadNlsBundleOrCreateFromI18n","header","bundlePath","result","join","cacheRoot","id","hash","useMemoryOnly","writeBundle","encoding","flag","file","Date","utimes","touch","err","code","SyntaxError","log","unlink","metaDataPath","languagePackLocation","translationsConfig","languagePack","contents","metaData","module_2","entry","translations","outDir","resultMessages","keys","messageKey","translatedMessage","undefined","push","createNLSBundle","writeFileSync","stringify","loadDefaultNlsBundle","folder","module_1","createDefaultNlsBundle","loadNlsBundle","languagePackSupport","languagePackId","translationsConfigFile","candidate","root","locale","existsSync","lastIndexOf","substring","findInTheBoxBundle","loadMessageBundle","ext","extname","substr","messageFormat","both","headerFile","dirname","parent","tryFindMetaDataHeaderFile","nlsBundle","module_3","json","resolvedLanguage","cacheLanguageResolution","resolveLanguage","Array","isArray","is","comment","process","env","VSCODE_NLS_CONFIG","vscodeOptions","toLowerCase","isBoolean","_languagePackSupport","_cacheRoot","_languagePackId","_translationsConfigFile","_corruptedFile","writeFile","_a","initializeSettings","config","opts","vscode","MergeConflictContentProvider","[object Object]","context","this","subscriptions","workspace","registerTextDocumentContentProvider","scheme","uri","ranges","query","document","openTextDocument","with","text","lastPosition","Position","forEach","rangeObj","conflictRange","fullRange","start","end","fullStart","fullEnd","getText","Range","line","character","documentEnd","lineAt","lineCount","range","ex","window","showErrorMessage","default","services_1","activate","services","begin","deactivate","documentTracker_1","codelensProvider_1","commandHandler_1","contentProvider_1","mergeDecorator_1","ConfigurationSectionName","configuration","createExtensionConfiguration","documentTracker","service","Function","onDidChangeConfiguration","configurationUpdated","workspaceConfiguration","getConfiguration","codeLensEnabled","decoratorsEnabled","enableCodeLens","enableDecorations","enableEditorOverview","disposable","dispose","mergeConflictParser_1","delayer_1","ScanTask","delayTime","initialOrigin","origins","Set","add","delayTask","Delayer","has","OriginDocumentMergeConflictTracker","origin","getConflicts","isPending","forget","cache","Map","delayExpireTime","getCacheKey","Promise","resolve","getConflictsOrEmpty","cacheItem","addOrigin","set","trigger","conflicts","from","delete","task","hasOrigin","clear","_origins","MergeConflictParser","containsConflict","scanDocument","documentMergeConflict_1","startHeaderMarker","commonAncestorsMarker","splitterMarker","endFooterMarker","currentConflict","conflictDescriptors","isEmptyOrWhitespace","startsWith","startHeader","commonAncestors","splitter","endFooter","completeDescriptor","scanItemTolMergeConflictDescriptor","filter","Boolean","map","descriptor","DocumentMergeConflict","scanned","tokenAfterCurrentBlock","current","decoratorContent","rangeIncludingLineBreak","shiftBackOneCharacter","content","currentTokenLine","nextTokenLine","incoming","includes","unlessEqual","isEqual","type","editor","edit","applyEdit","replaceRangeWithContent","currentContent","incomingContent","concat","isNewlineOnly","defaultDelay","timeout","completionPromise","onSuccess","delay","cancelTimeout","then","setTimeout","clearTimeout","__dirname","trackerService","tracker","createTracker","registerCodeLensProvider","updatedConfig","codeLensRegistrationHandle","_token","items","conflict","acceptCurrentCommand","command","title","acceptIncomingCommand","acceptBothCommand","diffCommand","CodeLens","languages","NavigationDirection","disposables","registerTextEditorCommand","acceptCurrent","acceptIncoming","acceptSelection","acceptBoth","acceptAllCurrent","acceptAllCurrentResources","acceptAllIncoming","acceptAllIncomingResources","acceptAllBoth","navigateNext","navigatePrevious","compare","cb","resourceCB","commands","registerCommand","every","resourceUri","activeTextEditor","accept","acceptAll","resources","acceptAllResources","fileName","basename","fsPath","findConflictContainingSelection","showWarningMessage","leftRanges","rightRanges","leftUri","rightUri","mergeConflictLineOffsets","nextconflict","selection","openToTheSide","viewColumn","ViewColumn","Beside","Active","executeCommand","navigate","Forwards","Backwards","typeToAccept","active","isBefore","isAfter","commitEdit","direction","navigationResult","findConflictForNavigation","canNavigate","Selection","revealRange","TextEditorRevealType","Default","documents","all","resource","WorkspaceEdit","newText","contains","predicate","fallback","decorations","decorationUsesWholeLine","updating","registerDecorationTypes","visibleTextEditors","e","applyDecorations","onDidOpenTextDocument","event","applyDecorationsFromEvent","onDidChangeTextDocument","onDidChangeVisibleTextEditors","removeDecorations","k","createTextEditorDecorationType","generateBlockRenderOptions","isWholeLine","backgroundColor","ThemeColor","color","outlineStyle","outlineWidth","outlineColor","after","contentText","overviewRulerColor","renderOptions","overviewRulerLane","OverviewRulerLane","Full","eventDocument","indexOf","matchDecorations","pushDecoration","isEmpty","commonAncestorsRegion","decorationKey","decorationType","setDecorations"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = require(\"vscode\");","module.exports = require(\"path\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar fs = require(\"fs\");\r\nvar toString = Object.prototype.toString;\r\nfunction isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\nfunction isNumber(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nfunction isString(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction readJsonFileSync(filename) {\r\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\r\n}\r\nvar MessageFormat;\r\n(function (MessageFormat) {\r\n    MessageFormat[\"file\"] = \"file\";\r\n    MessageFormat[\"bundle\"] = \"bundle\";\r\n    MessageFormat[\"both\"] = \"both\";\r\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\r\nvar LocalizeInfo;\r\n(function (LocalizeInfo) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\r\n    }\r\n    LocalizeInfo.is = is;\r\n})(LocalizeInfo || (LocalizeInfo = {}));\r\nvar resolvedLanguage;\r\nvar resolvedBundles;\r\nvar options;\r\nvar isPseudo;\r\nfunction initializeSettings() {\r\n    options = { locale: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\r\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\r\n        try {\r\n            var vscodeOptions = JSON.parse(process.env.VSCODE_NLS_CONFIG);\r\n            if (isString(vscodeOptions.locale)) {\r\n                options.locale = vscodeOptions.locale.toLowerCase();\r\n            }\r\n            if (isBoolean(vscodeOptions._languagePackSupport)) {\r\n                options.languagePackSupport = vscodeOptions._languagePackSupport;\r\n            }\r\n            if (isString(vscodeOptions._cacheRoot)) {\r\n                options.cacheRoot = vscodeOptions._cacheRoot;\r\n            }\r\n            if (isString(vscodeOptions._languagePackId)) {\r\n                options.languagePackId = vscodeOptions._languagePackId;\r\n            }\r\n            if (isString(vscodeOptions._translationsConfigFile)) {\r\n                options.translationsConfigFile = vscodeOptions._translationsConfigFile;\r\n                try {\r\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\r\n                }\r\n                catch (error) {\r\n                    // We can't read the translation config file. Mark the cache as corrupted.\r\n                    if (vscodeOptions._corruptedFile) {\r\n                        fs.writeFile(vscodeOptions._corruptedFile, 'corrupted', 'utf8', function (err) {\r\n                            console.error(err);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // Do nothing.\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    resolvedLanguage = undefined;\r\n    resolvedBundles = Object.create(null);\r\n}\r\ninitializeSettings();\r\nfunction supportsLanguagePack() {\r\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\r\n        && options.translationsConfig !== undefined;\r\n}\r\nfunction format(message, args) {\r\n    var result;\r\n    if (isPseudo) {\r\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\r\n        message = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\r\n    }\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            var arg = args[index];\r\n            var replaced = match;\r\n            if (typeof arg === 'string') {\r\n                replaced = arg;\r\n            }\r\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\r\n                replaced = String(arg);\r\n            }\r\n            return replaced;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction createScopedLocalizeFunction(messages) {\r\n    return function (key, message) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNumber(key)) {\r\n            if (key >= messages.length) {\r\n                console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \" + new Error('').stack);\r\n                return;\r\n            }\r\n            return format(messages[key], args);\r\n        }\r\n        else {\r\n            if (isString(message)) {\r\n                console.warn(\"Message \" + message + \" didn't get externalized correctly.\");\r\n                return format(message, args);\r\n            }\r\n            else {\r\n                console.error(\"Broken localize call found. Stacktrace is\\n: \" + new Error('').stack);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nfunction resolveLanguage(file) {\r\n    var resolvedLanguage;\r\n    if (options.cacheLanguageResolution && resolvedLanguage) {\r\n        resolvedLanguage = resolvedLanguage;\r\n    }\r\n    else {\r\n        if (isPseudo || !options.locale) {\r\n            resolvedLanguage = '.nls.json';\r\n        }\r\n        else {\r\n            var locale = options.locale;\r\n            while (locale) {\r\n                var candidate = '.nls.' + locale + '.json';\r\n                if (fs.existsSync(file + candidate)) {\r\n                    resolvedLanguage = candidate;\r\n                    break;\r\n                }\r\n                else {\r\n                    var index = locale.lastIndexOf('-');\r\n                    if (index > 0) {\r\n                        locale = locale.substring(0, index);\r\n                    }\r\n                    else {\r\n                        resolvedLanguage = '.nls.json';\r\n                        locale = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (options.cacheLanguageResolution) {\r\n            resolvedLanguage = resolvedLanguage;\r\n        }\r\n    }\r\n    return file + resolvedLanguage;\r\n}\r\nfunction findInTheBoxBundle(root) {\r\n    var locale = options.locale;\r\n    while (locale) {\r\n        var candidate = path.join(root, \"nls.bundle.\" + locale + \".json\");\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n        else {\r\n            var index = locale.lastIndexOf('-');\r\n            if (index > 0) {\r\n                locale = locale.substring(0, index);\r\n            }\r\n            else {\r\n                locale = undefined;\r\n            }\r\n        }\r\n    }\r\n    // Test if we can reslove the default bundle.\r\n    if (locale === undefined) {\r\n        var candidate = path.join(root, 'nls.bundle.json');\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nfunction mkdir(directory) {\r\n    try {\r\n        fs.mkdirSync(directory);\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'EEXIST') {\r\n            return;\r\n        }\r\n        else if (err.code === 'ENOENT') {\r\n            var parent = path.dirname(directory);\r\n            if (parent !== directory) {\r\n                mkdir(parent);\r\n                fs.mkdirSync(directory);\r\n            }\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nfunction createDefaultNlsBundle(folder) {\r\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_1 in metaData) {\r\n        var entry = metaData[module_1];\r\n        result[module_1] = entry.messages;\r\n    }\r\n    return result;\r\n}\r\nfunction createNLSBundle(header, metaDataPath) {\r\n    var languagePackLocation = options.translationsConfig[header.id];\r\n    if (!languagePackLocation) {\r\n        return undefined;\r\n    }\r\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\r\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_2 in metaData) {\r\n        var entry = metaData[module_2];\r\n        var translations = languagePack[header.outDir + \"/\" + module_2];\r\n        if (translations) {\r\n            var resultMessages = [];\r\n            for (var i = 0; i < entry.keys.length; i++) {\r\n                var messageKey = entry.keys[i];\r\n                var key = isString(messageKey) ? messageKey : messageKey.key;\r\n                var translatedMessage = translations[key];\r\n                if (translatedMessage === undefined) {\r\n                    translatedMessage = entry.messages[i];\r\n                }\r\n                resultMessages.push(translatedMessage);\r\n            }\r\n            result[module_2] = resultMessages;\r\n        }\r\n        else {\r\n            result[module_2] = entry.messages;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction touch(file) {\r\n    var d = new Date();\r\n    fs.utimes(file, d, d, function () {\r\n        // Do nothing. Ignore\r\n    });\r\n}\r\nfunction cacheBundle(key, bundle) {\r\n    resolvedBundles[key] = bundle;\r\n    return bundle;\r\n}\r\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\r\n    var result;\r\n    var bundle = path.join(options.cacheRoot, header.id + \"-\" + header.hash + \".json\");\r\n    var useMemoryOnly = false;\r\n    var writeBundle = false;\r\n    try {\r\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\r\n        touch(bundle);\r\n        return result;\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'ENOENT') {\r\n            writeBundle = true;\r\n        }\r\n        else if (err instanceof SyntaxError) {\r\n            // We have a syntax error. So no valid JSON. Use\r\n            console.log(\"Syntax error parsing message bundle: \" + err.message + \".\");\r\n            fs.unlink(bundle, function (err) {\r\n                if (err) {\r\n                    console.error(\"Deleting corrupted bundle \" + bundle + \" failed.\");\r\n                }\r\n            });\r\n            useMemoryOnly = true;\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    result = createNLSBundle(header, bundlePath);\r\n    if (!result || useMemoryOnly) {\r\n        return result;\r\n    }\r\n    if (writeBundle) {\r\n        try {\r\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\r\n        }\r\n        catch (err) {\r\n            if (err.code === 'EEXIST') {\r\n                return result;\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadDefaultNlsBundle(bundlePath) {\r\n    try {\r\n        return createDefaultNlsBundle(bundlePath);\r\n    }\r\n    catch (err) {\r\n        console.log(\"Generating default bundle from meta data failed.\", err);\r\n        return undefined;\r\n    }\r\n}\r\nfunction loadNlsBundle(header, bundlePath) {\r\n    var result;\r\n    // Core decided to use a language pack. Do the same in the extension\r\n    if (supportsLanguagePack()) {\r\n        try {\r\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\r\n        }\r\n        catch (err) {\r\n            console.log(\"Load or create bundle failed \", err);\r\n        }\r\n    }\r\n    if (!result) {\r\n        // No language pack found, but core is running in language pack mode\r\n        // Don't try to use old in the box bundles since the might be stale\r\n        // Fall right back to the default bundle.\r\n        if (options.languagePackSupport) {\r\n            return loadDefaultNlsBundle(bundlePath);\r\n        }\r\n        var candidate = findInTheBoxBundle(bundlePath);\r\n        if (candidate) {\r\n            try {\r\n                return readJsonFileSync(candidate);\r\n            }\r\n            catch (err) {\r\n                console.log(\"Loading in the box message bundle failed.\", err);\r\n            }\r\n        }\r\n        result = loadDefaultNlsBundle(bundlePath);\r\n    }\r\n    return result;\r\n}\r\nfunction tryFindMetaDataHeaderFile(file) {\r\n    var result;\r\n    var dirname = path.dirname(file);\r\n    while (true) {\r\n        result = path.join(dirname, 'nls.metadata.header.json');\r\n        if (fs.existsSync(result)) {\r\n            break;\r\n        }\r\n        var parent = path.dirname(dirname);\r\n        if (parent === dirname) {\r\n            result = undefined;\r\n            break;\r\n        }\r\n        else {\r\n            dirname = parent;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadMessageBundle(file) {\r\n    if (!file) {\r\n        // No file. We are in dev mode. Return the default\r\n        // localize function.\r\n        return localize;\r\n    }\r\n    // Remove extension since we load json files.\r\n    var ext = path.extname(file);\r\n    if (ext) {\r\n        file = file.substr(0, file.length - ext.length);\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\r\n        var headerFile = tryFindMetaDataHeaderFile(file);\r\n        if (headerFile) {\r\n            var bundlePath = path.dirname(headerFile);\r\n            var bundle = resolvedBundles[bundlePath];\r\n            if (bundle === undefined) {\r\n                try {\r\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\r\n                    try {\r\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\r\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\r\n                    }\r\n                    catch (err) {\r\n                        console.error('Failed to load nls bundle', err);\r\n                        bundle = cacheBundle(bundlePath, null);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error('Failed to read header file', err);\r\n                    bundle = cacheBundle(bundlePath, null);\r\n                }\r\n            }\r\n            if (bundle) {\r\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\/g, '/');\r\n                var messages = bundle.nlsBundle[module_3];\r\n                if (messages === undefined) {\r\n                    console.error(\"Messages for file \" + file + \" not found. See console for details.\");\r\n                    return function () {\r\n                        return 'Messages not found.';\r\n                    };\r\n                }\r\n                return createScopedLocalizeFunction(messages);\r\n            }\r\n        }\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\r\n        // Try to load a single file bundle\r\n        try {\r\n            var json = readJsonFileSync(resolveLanguage(file));\r\n            if (Array.isArray(json)) {\r\n                return createScopedLocalizeFunction(json);\r\n            }\r\n            else {\r\n                if (isDefined(json.messages) && isDefined(json.keys)) {\r\n                    return createScopedLocalizeFunction(json.messages);\r\n                }\r\n                else {\r\n                    console.error(\"String bundle '\" + file + \"' uses an unsupported format.\");\r\n                    return function () {\r\n                        return 'File bundle has unsupported format. See console for details';\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT') {\r\n                console.error('Failed to load single file bundle', err);\r\n            }\r\n        }\r\n    }\r\n    console.error(\"Failed to load message bundle for file \" + file);\r\n    return function () {\r\n        return 'Failed to load message bundle. See console for details.';\r\n    };\r\n}\r\nexports.loadMessageBundle = loadMessageBundle;\r\nfunction config(opts) {\r\n    if (opts) {\r\n        if (isString(opts.locale)) {\r\n            options.locale = opts.locale.toLowerCase();\r\n            resolvedLanguage = undefined;\r\n            resolvedBundles = Object.create(null);\r\n        }\r\n        if (opts.messageFormat !== undefined) {\r\n            options.messageFormat = opts.messageFormat;\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    return loadMessageBundle;\r\n}\r\nexports.config = config;\r\n//# sourceMappingURL=main.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport default class MergeConflictContentProvider implements vscode.TextDocumentContentProvider, vscode.Disposable {\n\n\tstatic scheme = 'merge-conflict.conflict-diff';\n\n\tconstructor(private context: vscode.ExtensionContext) {\n\t}\n\n\tbegin() {\n\t\tthis.context.subscriptions.push(\n\t\t\tvscode.workspace.registerTextDocumentContentProvider(MergeConflictContentProvider.scheme, this)\n\t\t);\n\t}\n\n\tdispose() {\n\t}\n\n\tasync provideTextDocumentContent(uri: vscode.Uri): Promise<string | null> {\n\t\ttry {\n\t\t\tconst { scheme, ranges } = JSON.parse(uri.query) as { scheme: string, ranges: [{ line: number, character: number }[], { line: number, character: number }[]][] };\n\n\t\t\t// complete diff\n\t\t\tconst document = await vscode.workspace.openTextDocument(uri.with({ scheme, query: '' }));\n\n\t\t\tlet text = '';\n\t\t\tlet lastPosition = new vscode.Position(0, 0);\n\n\t\t\tranges.forEach(rangeObj => {\n\t\t\t\tlet [conflictRange, fullRange] = rangeObj;\n\t\t\t\tconst [start, end] = conflictRange;\n\t\t\t\tconst [fullStart, fullEnd] = fullRange;\n\n\t\t\t\ttext += document.getText(new vscode.Range(lastPosition.line, lastPosition.character, fullStart.line, fullStart.character));\n\t\t\t\ttext += document.getText(new vscode.Range(start.line, start.character, end.line, end.character));\n\t\t\t\tlastPosition = new vscode.Position(fullEnd.line, fullEnd.character);\n\t\t\t});\n\n\t\t\tlet documentEnd = document.lineAt(document.lineCount - 1).range.end;\n\t\t\ttext += document.getText(new vscode.Range(lastPosition.line, lastPosition.character, documentEnd.line, documentEnd.character));\n\n\t\t\treturn text;\n\t\t}\n\t\tcatch (ex) {\n\t\t\tawait vscode.window.showErrorMessage('Unable to show comparison');\n\t\t\treturn null;\n\t\t}\n\t}\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport MergeConflictServices from './services';\n\nexport function activate(context: vscode.ExtensionContext) {\n\t// Register disposables\n\tconst services = new MergeConflictServices(context);\n\tservices.begin();\n\tcontext.subscriptions.push(services);\n}\n\nexport function deactivate() {\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as vscode from 'vscode';\nimport DocumentTracker from './documentTracker';\nimport CodeLensProvider from './codelensProvider';\nimport CommandHandler from './commandHandler';\nimport ContentProvider from './contentProvider';\nimport Decorator from './mergeDecorator';\nimport * as interfaces from './interfaces';\n\nconst ConfigurationSectionName = 'merge-conflict';\n\nexport default class ServiceWrapper implements vscode.Disposable {\n\n\tprivate services: vscode.Disposable[] = [];\n\n\tconstructor(private context: vscode.ExtensionContext) {\n\t}\n\n\tbegin() {\n\n\t\tlet configuration = this.createExtensionConfiguration();\n\t\tconst documentTracker = new DocumentTracker();\n\n\t\tthis.services.push(\n\t\t\tdocumentTracker,\n\t\t\tnew CommandHandler(documentTracker),\n\t\t\tnew CodeLensProvider(documentTracker),\n\t\t\tnew ContentProvider(this.context),\n\t\t\tnew Decorator(this.context, documentTracker),\n\t\t);\n\n\t\tthis.services.forEach((service: any) => {\n\t\t\tif (service.begin && service.begin instanceof Function) {\n\t\t\t\tservice.begin(configuration);\n\t\t\t}\n\t\t});\n\n\t\tvscode.workspace.onDidChangeConfiguration(() => {\n\t\t\tthis.services.forEach((service: any) => {\n\t\t\t\tif (service.configurationUpdated && service.configurationUpdated instanceof Function) {\n\t\t\t\t\tservice.configurationUpdated(this.createExtensionConfiguration());\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tcreateExtensionConfiguration(): interfaces.IExtensionConfiguration {\n\t\tconst workspaceConfiguration = vscode.workspace.getConfiguration(ConfigurationSectionName);\n\t\tconst codeLensEnabled: boolean = workspaceConfiguration.get('codeLens.enabled', true);\n\t\tconst decoratorsEnabled: boolean = workspaceConfiguration.get('decorators.enabled', true);\n\n\t\treturn {\n\t\t\tenableCodeLens: codeLensEnabled,\n\t\t\tenableDecorations: decoratorsEnabled,\n\t\t\tenableEditorOverview: decoratorsEnabled\n\t\t};\n\t}\n\n\tdispose() {\n\t\tthis.services.forEach(disposable => disposable.dispose());\n\t\tthis.services = [];\n\t}\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { MergeConflictParser } from './mergeConflictParser';\nimport * as interfaces from './interfaces';\nimport { Delayer } from './delayer';\n\nclass ScanTask {\n\tpublic origins: Set<string> = new Set<string>();\n\tpublic delayTask: Delayer<interfaces.IDocumentMergeConflict[]>;\n\n\tconstructor(delayTime: number, initialOrigin: string) {\n\t\tthis.origins.add(initialOrigin);\n\t\tthis.delayTask = new Delayer<interfaces.IDocumentMergeConflict[]>(delayTime);\n\t}\n\n\tpublic addOrigin(name: string): boolean {\n\t\tif (this.origins.has(name)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic hasOrigin(name: string): boolean {\n\t\treturn this.origins.has(name);\n\t}\n}\n\nclass OriginDocumentMergeConflictTracker implements interfaces.IDocumentMergeConflictTracker {\n\tconstructor(private parent: DocumentMergeConflictTracker, private origin: string) {\n\t}\n\n\tgetConflicts(document: vscode.TextDocument): PromiseLike<interfaces.IDocumentMergeConflict[]> {\n\t\treturn this.parent.getConflicts(document, this.origin);\n\t}\n\n\tisPending(document: vscode.TextDocument): boolean {\n\t\treturn this.parent.isPending(document, this.origin);\n\t}\n\n\tforget(document: vscode.TextDocument) {\n\t\tthis.parent.forget(document);\n\t}\n}\n\nexport default class DocumentMergeConflictTracker implements vscode.Disposable, interfaces.IDocumentMergeConflictTrackerService {\n\tprivate cache: Map<string, ScanTask> = new Map();\n\tprivate delayExpireTime: number = 250;\n\n\tgetConflicts(document: vscode.TextDocument, origin: string): PromiseLike<interfaces.IDocumentMergeConflict[]> {\n\t\t// Attempt from cache\n\n\t\tlet key = this.getCacheKey(document);\n\n\t\tif (!key) {\n\t\t\t// Document doesn't have a uri, can't cache it, so return\n\t\t\treturn Promise.resolve(this.getConflictsOrEmpty(document, [origin]));\n\t\t}\n\n\t\tlet cacheItem = this.cache.get(key);\n\t\tif (!cacheItem) {\n\t\t\tcacheItem = new ScanTask(this.delayExpireTime, origin);\n\t\t\tthis.cache.set(key, cacheItem);\n\t\t}\n\t\telse {\n\t\t\tcacheItem.addOrigin(origin);\n\t\t}\n\n\t\treturn cacheItem.delayTask.trigger(() => {\n\t\t\tlet conflicts = this.getConflictsOrEmpty(document, Array.from(cacheItem!.origins));\n\n\t\t\tif (this.cache) {\n\t\t\t\tthis.cache.delete(key!);\n\t\t\t}\n\n\t\t\treturn conflicts;\n\t\t});\n\t}\n\n\tisPending(document: vscode.TextDocument, origin: string): boolean {\n\t\tif (!document) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet key = this.getCacheKey(document);\n\t\tif (!key) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst task = this.cache.get(key);\n\t\tif (!task) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn task.hasOrigin(origin);\n\t}\n\n\tcreateTracker(origin: string): interfaces.IDocumentMergeConflictTracker {\n\t\treturn new OriginDocumentMergeConflictTracker(this, origin);\n\t}\n\n\tforget(document: vscode.TextDocument) {\n\t\tlet key = this.getCacheKey(document);\n\n\t\tif (key) {\n\t\t\tthis.cache.delete(key);\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.cache.clear();\n\t}\n\n\tprivate getConflictsOrEmpty(document: vscode.TextDocument, _origins: string[]): interfaces.IDocumentMergeConflict[] {\n\t\tconst containsConflict = MergeConflictParser.containsConflict(document);\n\n\t\tif (!containsConflict) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst conflicts = MergeConflictParser.scanDocument(document);\n\t\treturn conflicts;\n\t}\n\n\tprivate getCacheKey(document: vscode.TextDocument): string | null {\n\t\tif (document.uri) {\n\t\t\treturn document.uri.toString();\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as vscode from 'vscode';\nimport * as interfaces from './interfaces';\nimport { DocumentMergeConflict } from './documentMergeConflict';\n\nconst startHeaderMarker = '<<<<<<<';\nconst commonAncestorsMarker = '|||||||';\nconst splitterMarker = '=======';\nconst endFooterMarker = '>>>>>>>';\n\ninterface IScanMergedConflict {\n\tstartHeader: vscode.TextLine;\n\tcommonAncestors: vscode.TextLine[];\n\tsplitter?: vscode.TextLine;\n\tendFooter?: vscode.TextLine;\n}\n\nexport class MergeConflictParser {\n\n\tstatic scanDocument(document: vscode.TextDocument): interfaces.IDocumentMergeConflict[] {\n\n\t\t// Scan each line in the document, we already know there is at least a <<<<<<< and\n\t\t// >>>>>> marker within the document, we need to group these into conflict ranges.\n\t\t// We initially build a scan match, that references the lines of the header, splitter\n\t\t// and footer. This is then converted into a full descriptor containing all required\n\t\t// ranges.\n\n\t\tlet currentConflict: IScanMergedConflict | null = null;\n\t\tconst conflictDescriptors: interfaces.IDocumentMergeConflictDescriptor[] = [];\n\n\t\tfor (let i = 0; i < document.lineCount; i++) {\n\t\t\tconst line = document.lineAt(i);\n\n\t\t\t// Ignore empty lines\n\t\t\tif (!line || line.isEmptyOrWhitespace) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Is this a start line? <<<<<<<\n\t\t\tif (line.text.startsWith(startHeaderMarker)) {\n\t\t\t\tif (currentConflict !== null) {\n\t\t\t\t\t// Error, we should not see a startMarker before we've seen an endMarker\n\t\t\t\t\tcurrentConflict = null;\n\n\t\t\t\t\t// Give up parsing, anything matched up this to this point will be decorated\n\t\t\t\t\t// anything after will not\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// Create a new conflict starting at this line\n\t\t\t\tcurrentConflict = { startHeader: line, commonAncestors: [] };\n\t\t\t}\n\t\t\t// Are we within a conflict block and is this a common ancestors marker? |||||||\n\t\t\telse if (currentConflict && !currentConflict.splitter && line.text.startsWith(commonAncestorsMarker)) {\n\t\t\t\tcurrentConflict.commonAncestors.push(line);\n\t\t\t}\n\t\t\t// Are we within a conflict block and is this a splitter? =======\n\t\t\telse if (currentConflict && !currentConflict.splitter && line.text.startsWith(splitterMarker)) {\n\t\t\t\tcurrentConflict.splitter = line;\n\t\t\t}\n\t\t\t// Are we within a conflict block and is this a footer? >>>>>>>\n\t\t\telse if (currentConflict && line.text.startsWith(endFooterMarker)) {\n\t\t\t\tcurrentConflict.endFooter = line;\n\n\t\t\t\t// Create a full descriptor from the lines that we matched. This can return\n\t\t\t\t// null if the descriptor could not be completed.\n\t\t\t\tlet completeDescriptor = MergeConflictParser.scanItemTolMergeConflictDescriptor(document, currentConflict);\n\n\t\t\t\tif (completeDescriptor !== null) {\n\t\t\t\t\tconflictDescriptors.push(completeDescriptor);\n\t\t\t\t}\n\n\t\t\t\t// Reset the current conflict to be empty, so we can match the next\n\t\t\t\t// starting header marker.\n\t\t\t\tcurrentConflict = null;\n\t\t\t}\n\t\t}\n\n\t\treturn conflictDescriptors\n\t\t\t.filter(Boolean)\n\t\t\t.map(descriptor => new DocumentMergeConflict(descriptor));\n\t}\n\n\tprivate static scanItemTolMergeConflictDescriptor(document: vscode.TextDocument, scanned: IScanMergedConflict): interfaces.IDocumentMergeConflictDescriptor | null {\n\t\t// Validate we have all the required lines within the scan item.\n\t\tif (!scanned.startHeader || !scanned.splitter || !scanned.endFooter) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet tokenAfterCurrentBlock: vscode.TextLine = scanned.commonAncestors[0] || scanned.splitter;\n\n\t\t// Assume that descriptor.current.header, descriptor.incoming.header and descriptor.splitter\n\t\t// have valid ranges, fill in content and total ranges from these parts.\n\t\t// NOTE: We need to shift the decorator range back one character so the splitter does not end up with\n\t\t// two decoration colors (current and splitter), if we take the new line from the content into account\n\t\t// the decorator will wrap to the next line.\n\t\treturn {\n\t\t\tcurrent: {\n\t\t\t\theader: scanned.startHeader.range,\n\t\t\t\tdecoratorContent: new vscode.Range(\n\t\t\t\t\tscanned.startHeader.rangeIncludingLineBreak.end,\n\t\t\t\t\tMergeConflictParser.shiftBackOneCharacter(document, tokenAfterCurrentBlock.range.start, scanned.startHeader.rangeIncludingLineBreak.end)),\n\t\t\t\t// Current content is range between header (shifted for linebreak) and splitter or common ancestors mark start\n\t\t\t\tcontent: new vscode.Range(\n\t\t\t\t\tscanned.startHeader.rangeIncludingLineBreak.end,\n\t\t\t\t\ttokenAfterCurrentBlock.range.start),\n\t\t\t\tname: scanned.startHeader.text.substring(startHeaderMarker.length + 1)\n\t\t\t},\n\t\t\tcommonAncestors: scanned.commonAncestors.map((currentTokenLine, index, commonAncestors) => {\n\t\t\t\tlet nextTokenLine = commonAncestors[index + 1] || scanned.splitter;\n\t\t\t\treturn {\n\t\t\t\t\theader: currentTokenLine.range,\n\t\t\t\t\tdecoratorContent: new vscode.Range(\n\t\t\t\t\t\tcurrentTokenLine.rangeIncludingLineBreak.end,\n\t\t\t\t\t\tMergeConflictParser.shiftBackOneCharacter(document, nextTokenLine.range.start, currentTokenLine.rangeIncludingLineBreak.end)),\n\t\t\t\t\t// Each common ancestors block is range between one common ancestors token\n\t\t\t\t\t// (shifted for linebreak) and start of next common ancestors token or splitter\n\t\t\t\t\tcontent: new vscode.Range(\n\t\t\t\t\t\tcurrentTokenLine.rangeIncludingLineBreak.end,\n\t\t\t\t\t\tnextTokenLine.range.start),\n\t\t\t\t\tname: currentTokenLine.text.substring(commonAncestorsMarker.length + 1)\n\t\t\t\t};\n\t\t\t}),\n\t\t\tsplitter: scanned.splitter.range,\n\t\t\tincoming: {\n\t\t\t\theader: scanned.endFooter.range,\n\t\t\t\tdecoratorContent: new vscode.Range(\n\t\t\t\t\tscanned.splitter.rangeIncludingLineBreak.end,\n\t\t\t\t\tMergeConflictParser.shiftBackOneCharacter(document, scanned.endFooter.range.start, scanned.splitter.rangeIncludingLineBreak.end)),\n\t\t\t\t// Incoming content is range between splitter (shifted for linebreak) and footer start\n\t\t\t\tcontent: new vscode.Range(\n\t\t\t\t\tscanned.splitter.rangeIncludingLineBreak.end,\n\t\t\t\t\tscanned.endFooter.range.start),\n\t\t\t\tname: scanned.endFooter.text.substring(endFooterMarker.length + 1)\n\t\t\t},\n\t\t\t// Entire range is between current header start and incoming header end (including line break)\n\t\t\trange: new vscode.Range(scanned.startHeader.range.start, scanned.endFooter.rangeIncludingLineBreak.end)\n\t\t};\n\t}\n\n\tstatic containsConflict(document: vscode.TextDocument): boolean {\n\t\tif (!document) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet text = document.getText();\n\t\treturn text.includes(startHeaderMarker) && text.includes(endFooterMarker);\n\t}\n\n\tprivate static shiftBackOneCharacter(document: vscode.TextDocument, range: vscode.Position, unlessEqual: vscode.Position): vscode.Position {\n\t\tif (range.isEqual(unlessEqual)) {\n\t\t\treturn range;\n\t\t}\n\n\t\tlet line = range.line;\n\t\tlet character = range.character - 1;\n\n\t\tif (character < 0) {\n\t\t\tline--;\n\t\t\tcharacter = document.lineAt(line).range.end.character;\n\t\t}\n\n\t\treturn new vscode.Position(line, character);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as interfaces from './interfaces';\nimport * as vscode from 'vscode';\n\nexport class DocumentMergeConflict implements interfaces.IDocumentMergeConflict {\n\n\tpublic range: vscode.Range;\n\tpublic current: interfaces.IMergeRegion;\n\tpublic incoming: interfaces.IMergeRegion;\n\tpublic commonAncestors: interfaces.IMergeRegion[];\n\tpublic splitter: vscode.Range;\n\n\tconstructor(descriptor: interfaces.IDocumentMergeConflictDescriptor) {\n\t\tthis.range = descriptor.range;\n\t\tthis.current = descriptor.current;\n\t\tthis.incoming = descriptor.incoming;\n\t\tthis.commonAncestors = descriptor.commonAncestors;\n\t\tthis.splitter = descriptor.splitter;\n\t}\n\n\tpublic commitEdit(type: interfaces.CommitType, editor: vscode.TextEditor, edit?: vscode.TextEditorEdit): Thenable<boolean> {\n\n\t\tif (edit) {\n\n\t\t\tthis.applyEdit(type, editor.document, edit);\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\treturn editor.edit((edit) => this.applyEdit(type, editor.document, edit));\n\t}\n\n\tpublic applyEdit(type: interfaces.CommitType, document: vscode.TextDocument, edit: { replace(range: vscode.Range, newText: string): void; }): void {\n\n\t\t// Each conflict is a set of ranges as follows, note placements or newlines\n\t\t// which may not in spans\n\t\t// [ Conflict Range             -- (Entire content below)\n\t\t//   [ Current Header ]\\n       -- >>>>> Header\n\t\t//   [ Current Content ]        -- (content)\n\t\t//   [ Splitter ]\\n             -- =====\n\t\t//   [ Incoming Content ]       -- (content)\n\t\t//   [ Incoming Header ]\\n      -- <<<<< Incoming\n\t\t// ]\n\t\tif (type === interfaces.CommitType.Current) {\n\t\t\t// Replace [ Conflict Range ] with [ Current Content ]\n\t\t\tlet content = document.getText(this.current.content);\n\t\t\tthis.replaceRangeWithContent(content, edit);\n\t\t}\n\t\telse if (type === interfaces.CommitType.Incoming) {\n\t\t\tlet content = document.getText(this.incoming.content);\n\t\t\tthis.replaceRangeWithContent(content, edit);\n\t\t}\n\t\telse if (type === interfaces.CommitType.Both) {\n\t\t\t// Replace [ Conflict Range ] with [ Current Content ] + \\n + [ Incoming Content ]\n\n\t\t\tconst currentContent = document.getText(this.current.content);\n\t\t\tconst incomingContent = document.getText(this.incoming.content);\n\n\t\t\tedit.replace(this.range, currentContent.concat(incomingContent));\n\t\t}\n\t}\n\n\tprivate replaceRangeWithContent(content: string, edit: { replace(range: vscode.Range, newText: string): void; }) {\n\t\tif (this.isNewlineOnly(content)) {\n\t\t\tedit.replace(this.range, '');\n\t\t\treturn;\n\t\t}\n\n\t\t// Replace [ Conflict Range ] with [ Current Content ]\n\t\tedit.replace(this.range, content);\n\t}\n\n\tprivate isNewlineOnly(text: string) {\n\t\treturn text === '\\n' || text === '\\r\\n';\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface ITask<T> {\n\t(): T;\n}\n\nexport class Delayer<T> {\n\n\tpublic defaultDelay: number;\n\tprivate timeout: any; // Timer\n\tprivate completionPromise: Promise<T> | null;\n\tprivate onSuccess: ((value?: T | Thenable<T> | undefined) => void) | null;\n\tprivate task: ITask<T> | null;\n\n\tconstructor(defaultDelay: number) {\n\t\tthis.defaultDelay = defaultDelay;\n\t\tthis.timeout = null;\n\t\tthis.completionPromise = null;\n\t\tthis.onSuccess = null;\n\t\tthis.task = null;\n\t}\n\n\tpublic trigger(task: ITask<T>, delay: number = this.defaultDelay): Promise<T> {\n\t\tthis.task = task;\n\t\tif (delay >= 0) {\n\t\t\tthis.cancelTimeout();\n\t\t}\n\n\t\tif (!this.completionPromise) {\n\t\t\tthis.completionPromise = new Promise<T>((resolve) => {\n\t\t\t\tthis.onSuccess = resolve;\n\t\t\t}).then(() => {\n\t\t\t\tthis.completionPromise = null;\n\t\t\t\tthis.onSuccess = null;\n\t\t\t\tlet result = this.task!();\n\t\t\t\tthis.task = null;\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\n\t\tif (delay >= 0 || this.timeout === null) {\n\t\t\tthis.timeout = setTimeout(() => {\n\t\t\t\tthis.timeout = null;\n\t\t\t\tthis.onSuccess!(undefined);\n\t\t\t}, delay >= 0 ? delay : this.defaultDelay);\n\t\t}\n\n\t\treturn this.completionPromise;\n\t}\n\n\tpublic forceDelivery(): Promise<T> | null {\n\t\tif (!this.completionPromise) {\n\t\t\treturn null;\n\t\t}\n\t\tthis.cancelTimeout();\n\t\tlet result = this.completionPromise;\n\t\tthis.onSuccess!(undefined);\n\t\treturn result;\n\t}\n\n\tpublic isTriggered(): boolean {\n\t\treturn this.timeout !== null;\n\t}\n\n\tpublic cancel(): void {\n\t\tthis.cancelTimeout();\n\t\tthis.completionPromise = null;\n\t}\n\n\tprivate cancelTimeout(): void {\n\t\tif (this.timeout !== null) {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = null;\n\t\t}\n\t}\n}",null,"module.exports = require(\"fs\");",null,null],"sourceRoot":""}