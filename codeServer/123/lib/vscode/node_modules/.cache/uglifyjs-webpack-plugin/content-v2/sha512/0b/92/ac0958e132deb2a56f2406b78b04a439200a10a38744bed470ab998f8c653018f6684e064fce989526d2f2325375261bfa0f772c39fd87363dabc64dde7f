{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"/repo/lib/vscode/extensions/search-result/src/extension.ts\",\"external \\\"vscode\\\"\",\"external \\\"path\\\"\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"vscode\",\"pathUtils\",\"FILE_LINE_REGEX\",\"RESULT_LINE_REGEX\",\"SEARCH_RESULT_SELECTOR\",\"language\",\"DIRECTIVES\",\"FLAGS\",\"cachedLastParse\",\"documentChangeListener\",\"relativePathToUri\",\"path\",\"resultsUri\",\"isAbsolute\",\"Uri\",\"file\",\"indexOf\",\"join\",\"process\",\"env\",\"HOME\",\"slice\",\"workspace\",\"workspaceFolders\",\"multiRootFormattedPath\",\"exec\",\"workspaceName\",\"workspacePath\",\"folder\",\"filter\",\"wf\",\"uri\",\"fsPath\",\"length\",\"scheme\",\"prefixMatch\",\"toString\",\"startsWith\",\"console\",\"error\",\"activate\",\"context\",\"contextLineDecorations\",\"window\",\"createTextEditorDecorationType\",\"opacity\",\"matchLineDecorations\",\"fontWeight\",\"decorate\",\"editor\",\"parsed\",\"parseSearchResults\",\"document\",\"isResultLine\",\"contextRanges\",\"line\",\"isContext\",\"map\",\"prefixRange\",\"matchRanges\",\"setDecorations\",\"activeTextEditor\",\"languageId\",\"subscriptions\",\"push\",\"languages\",\"registerDocumentSymbolProvider\",\"provideDocumentSymbols\",\"token\",\"isFileLine\",\"DocumentSymbol\",\"SymbolKind\",\"File\",\"allLocations\",\"originSelectionRange\",\"reduce\",\"union\",\"location\",\"registerCompletionItemProvider\",\"[object Object]\",\"position\",\"lineAt\",\"character\",\"text\",\"header\",\"Array\",\"from\",\"_\",\"suggestion\",\"every\",\"flag\",\"label\",\"insertText\",\"registerDefinitionProvider\",\"lineResult\",\"type\",\"targetSelectionRange\",\"with\",\"start\",\"Position\",\"Math\",\"max\",\"end\",\"translateRangeSidewaysBy\",\"registerDocumentLinkProvider\",\"provideDocumentLinks\",\"range\",\"target\",\"targetUri\",\"onDidChangeActiveTextEditor\",\"undefined\",\"dispose\",\"onDidChangeTextDocument\",\"doc\",\"version\",\"parse\",\"lines\",\"getText\",\"split\",\"links\",\"currentTarget\",\"currentTargetLocations\",\"isCancellationRequested\",\"fileLine\",\"targetRange\",\"Range\",\"resultLine\",\"indentation\",\"_lineNumber\",\"seperator\",\"resultIndentation\",\"lineNumber\",\"resultStart\",\"metadataOffset\",\"require\"],\"mappings\":\"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\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 0);\\n\",\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\nimport * as vscode from 'vscode';\\nimport * as pathUtils from 'path';\\n\\nconst FILE_LINE_REGEX = /^(\\\\S.*):$/;\\nconst RESULT_LINE_REGEX = /^(\\\\s+)(\\\\d+)(:| )(\\\\s+)(.*)$/;\\nconst SEARCH_RESULT_SELECTOR = { language: 'search-result' };\\nconst DIRECTIVES = ['# Query:', '# Flags:', '# Including:', '# Excluding:', '# ContextLines:'];\\nconst FLAGS = ['RegExp', 'CaseSensitive', 'IgnoreExcludeSettings', 'WordMatch'];\\n\\nlet cachedLastParse: { version: number, parse: ParsedSearchResults, uri: vscode.Uri } | undefined;\\nlet documentChangeListener: vscode.Disposable | undefined;\\n\\n\\nexport function activate(context: vscode.ExtensionContext) {\\n\\n\\tconst contextLineDecorations = vscode.window.createTextEditorDecorationType({ opacity: '0.7' });\\n\\tconst matchLineDecorations = vscode.window.createTextEditorDecorationType({ fontWeight: 'bold' });\\n\\n\\tconst decorate = (editor: vscode.TextEditor) => {\\n\\t\\tconst parsed = parseSearchResults(editor.document).filter(isResultLine);\\n\\t\\tconst contextRanges = parsed.filter(line => line.isContext).map(line => line.prefixRange);\\n\\t\\tconst matchRanges = parsed.filter(line => !line.isContext).map(line => line.prefixRange);\\n\\t\\teditor.setDecorations(contextLineDecorations, contextRanges);\\n\\t\\teditor.setDecorations(matchLineDecorations, matchRanges);\\n\\t};\\n\\n\\tif (vscode.window.activeTextEditor && vscode.window.activeTextEditor.document.languageId === 'search-result') {\\n\\t\\tdecorate(vscode.window.activeTextEditor);\\n\\t}\\n\\n\\tcontext.subscriptions.push(\\n\\n\\t\\tvscode.languages.registerDocumentSymbolProvider(SEARCH_RESULT_SELECTOR, {\\n\\t\\t\\tprovideDocumentSymbols(document: vscode.TextDocument, token: vscode.CancellationToken): vscode.DocumentSymbol[] {\\n\\t\\t\\t\\tconst results = parseSearchResults(document, token)\\n\\t\\t\\t\\t\\t.filter(isFileLine)\\n\\t\\t\\t\\t\\t.map(line => new vscode.DocumentSymbol(\\n\\t\\t\\t\\t\\t\\tline.path,\\n\\t\\t\\t\\t\\t\\t'',\\n\\t\\t\\t\\t\\t\\tvscode.SymbolKind.File,\\n\\t\\t\\t\\t\\t\\tline.allLocations.map(({ originSelectionRange }) => originSelectionRange!).reduce((p, c) => p.union(c), line.location.originSelectionRange!),\\n\\t\\t\\t\\t\\t\\tline.location.originSelectionRange!,\\n\\t\\t\\t\\t\\t));\\n\\n\\t\\t\\t\\treturn results;\\n\\t\\t\\t}\\n\\t\\t}),\\n\\n\\t\\tvscode.languages.registerCompletionItemProvider(SEARCH_RESULT_SELECTOR, {\\n\\t\\t\\tprovideCompletionItems(document: vscode.TextDocument, position: vscode.Position): vscode.CompletionItem[] {\\n\\n\\t\\t\\t\\tconst line = document.lineAt(position.line);\\n\\t\\t\\t\\tif (position.line > 3) { return []; }\\n\\t\\t\\t\\tif (position.character === 0 || (position.character === 1 && line.text === '#')) {\\n\\t\\t\\t\\t\\tconst header = Array.from({ length: DIRECTIVES.length }).map((_, i) => document.lineAt(i).text);\\n\\n\\t\\t\\t\\t\\treturn DIRECTIVES\\n\\t\\t\\t\\t\\t\\t.filter(suggestion => header.every(line => line.indexOf(suggestion) === -1))\\n\\t\\t\\t\\t\\t\\t.map(flag => ({ label: flag, insertText: (flag.slice(position.character)) + ' ' }));\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (line.text.indexOf('# Flags:') === -1) { return []; }\\n\\n\\t\\t\\t\\treturn FLAGS\\n\\t\\t\\t\\t\\t.filter(flag => line.text.indexOf(flag) === -1)\\n\\t\\t\\t\\t\\t.map(flag => ({ label: flag, insertText: flag + ' ' }));\\n\\t\\t\\t}\\n\\t\\t}, '#'),\\n\\n\\t\\tvscode.languages.registerDefinitionProvider(SEARCH_RESULT_SELECTOR, {\\n\\t\\t\\tprovideDefinition(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken): vscode.DefinitionLink[] {\\n\\t\\t\\t\\tconst lineResult = parseSearchResults(document, token)[position.line];\\n\\t\\t\\t\\tif (!lineResult) { return []; }\\n\\t\\t\\t\\tif (lineResult.type === 'file') {\\n\\t\\t\\t\\t\\treturn lineResult.allLocations;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconst translateRangeSidewaysBy = (r: vscode.Range, n: number) =>\\n\\t\\t\\t\\t\\tr.with({ start: new vscode.Position(r.start.line, Math.max(0, n - r.start.character)), end: new vscode.Position(r.end.line, Math.max(0, n - r.end.character)) });\\n\\n\\t\\t\\t\\treturn [{\\n\\t\\t\\t\\t\\t...lineResult.location,\\n\\t\\t\\t\\t\\ttargetSelectionRange: translateRangeSidewaysBy(lineResult.location.targetSelectionRange!, position.character - 1)\\n\\t\\t\\t\\t}];\\n\\t\\t\\t}\\n\\t\\t}),\\n\\n\\t\\tvscode.languages.registerDocumentLinkProvider(SEARCH_RESULT_SELECTOR, {\\n\\t\\t\\tasync provideDocumentLinks(document: vscode.TextDocument, token: vscode.CancellationToken): Promise<vscode.DocumentLink[]> {\\n\\t\\t\\t\\treturn parseSearchResults(document, token)\\n\\t\\t\\t\\t\\t.filter(({ type }) => type === 'file')\\n\\t\\t\\t\\t\\t.map(({ location }) => ({ range: location.originSelectionRange!, target: location.targetUri }));\\n\\t\\t\\t}\\n\\t\\t}),\\n\\n\\t\\tvscode.window.onDidChangeActiveTextEditor(editor => {\\n\\t\\t\\tif (editor?.document.languageId === 'search-result') {\\n\\t\\t\\t\\t// Clear the parse whenever we open a new editor.\\n\\t\\t\\t\\t// Conservative because things like the URI might remain constant even if the contents change, and re-parsing even large files is relatively fast.\\n\\t\\t\\t\\tcachedLastParse = undefined;\\n\\n\\t\\t\\t\\tdocumentChangeListener?.dispose();\\n\\t\\t\\t\\tdocumentChangeListener = vscode.workspace.onDidChangeTextDocument(doc => {\\n\\t\\t\\t\\t\\tif (doc.document.uri === editor.document.uri) {\\n\\t\\t\\t\\t\\t\\tdecorate(editor);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tdecorate(editor);\\n\\t\\t\\t}\\n\\t\\t}),\\n\\n\\t\\t{ dispose() { cachedLastParse = undefined; documentChangeListener?.dispose(); } }\\n\\t);\\n}\\n\\n\\nfunction relativePathToUri(path: string, resultsUri: vscode.Uri): vscode.Uri | undefined {\\n\\tif (pathUtils.isAbsolute(path)) { return vscode.Uri.file(path); }\\n\\tif (path.indexOf('~/') === 0) {\\n\\t\\treturn vscode.Uri.file(pathUtils.join(process.env.HOME!, path.slice(2)));\\n\\t}\\n\\n\\n\\tif (vscode.workspace.workspaceFolders) {\\n\\t\\tconst multiRootFormattedPath = /^(.*) • (.*)$/.exec(path);\\n\\t\\tif (multiRootFormattedPath) {\\n\\t\\t\\tconst [, workspaceName, workspacePath] = multiRootFormattedPath;\\n\\t\\t\\tconst folder = vscode.workspace.workspaceFolders.filter(wf => wf.name === workspaceName)[0];\\n\\t\\t\\tif (folder) {\\n\\t\\t\\t\\treturn vscode.Uri.file(pathUtils.join(folder.uri.fsPath, workspacePath));\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\telse if (vscode.workspace.workspaceFolders.length === 1) {\\n\\t\\t\\treturn vscode.Uri.file(pathUtils.join(vscode.workspace.workspaceFolders[0].uri.fsPath, path));\\n\\t\\t} else if (resultsUri.scheme !== 'untitled') {\\n\\t\\t\\t// We're in a multi-root workspace, but the path is not multi-root formatted\\n\\t\\t\\t// Possibly a saved search from a single root session. Try checking if the search result document's URI is in a current workspace folder.\\n\\t\\t\\tconst prefixMatch = vscode.workspace.workspaceFolders.filter(wf => resultsUri.toString().startsWith(wf.uri.toString()))[0];\\n\\t\\t\\tif (prefixMatch) { return vscode.Uri.file(pathUtils.join(prefixMatch.uri.fsPath, path)); }\\n\\t\\t}\\n\\t}\\n\\n\\tconsole.error(`Unable to resolve path ${path}`);\\n\\treturn undefined;\\n}\\n\\ntype ParsedSearchFileLine = { type: 'file', location: vscode.LocationLink, allLocations: vscode.LocationLink[], path: string };\\ntype ParsedSearchResultLine = { type: 'result', location: vscode.LocationLink, isContext: boolean, prefixRange: vscode.Range };\\ntype ParsedSearchResults = Array<ParsedSearchFileLine | ParsedSearchResultLine>;\\nconst isFileLine = (line: ParsedSearchResultLine | ParsedSearchFileLine): line is ParsedSearchFileLine => line.type === 'file';\\nconst isResultLine = (line: ParsedSearchResultLine | ParsedSearchFileLine): line is ParsedSearchResultLine => line.type === 'result';\\n\\n\\nfunction parseSearchResults(document: vscode.TextDocument, token?: vscode.CancellationToken): ParsedSearchResults {\\n\\n\\tif (cachedLastParse && cachedLastParse.uri === document.uri && cachedLastParse.version === document.version) {\\n\\t\\treturn cachedLastParse.parse;\\n\\t}\\n\\n\\tconst lines = document.getText().split(/\\\\r?\\\\n/);\\n\\tconst links: ParsedSearchResults = [];\\n\\n\\tlet currentTarget: vscode.Uri | undefined = undefined;\\n\\tlet currentTargetLocations: vscode.LocationLink[] | undefined = undefined;\\n\\n\\tfor (let i = 0; i < lines.length; i++) {\\n\\t\\t// TODO: This is probably always false, given we're pegging the thread...\\n\\t\\tif (token?.isCancellationRequested) { return []; }\\n\\t\\tconst line = lines[i];\\n\\n\\t\\tconst fileLine = FILE_LINE_REGEX.exec(line);\\n\\t\\tif (fileLine) {\\n\\t\\t\\tconst [, path] = fileLine;\\n\\n\\t\\t\\tcurrentTarget = relativePathToUri(path, document.uri);\\n\\t\\t\\tif (!currentTarget) { continue; }\\n\\t\\t\\tcurrentTargetLocations = [];\\n\\n\\t\\t\\tconst location: vscode.LocationLink = {\\n\\t\\t\\t\\ttargetRange: new vscode.Range(0, 0, 0, 1),\\n\\t\\t\\t\\ttargetUri: currentTarget,\\n\\t\\t\\t\\toriginSelectionRange: new vscode.Range(i, 0, i, line.length),\\n\\t\\t\\t};\\n\\n\\n\\t\\t\\tlinks[i] = { type: 'file', location, allLocations: currentTargetLocations, path };\\n\\t\\t}\\n\\n\\t\\tif (!currentTarget) { continue; }\\n\\n\\t\\tconst resultLine = RESULT_LINE_REGEX.exec(line);\\n\\t\\tif (resultLine) {\\n\\t\\t\\tconst [, indentation, _lineNumber, seperator, resultIndentation] = resultLine;\\n\\t\\t\\tconst lineNumber = +_lineNumber - 1;\\n\\t\\t\\tconst resultStart = (indentation + _lineNumber + seperator + resultIndentation).length;\\n\\t\\t\\tconst metadataOffset = (indentation + _lineNumber + seperator).length;\\n\\n\\t\\t\\tconst location: vscode.LocationLink = {\\n\\t\\t\\t\\ttargetRange: new vscode.Range(Math.max(lineNumber - 3, 0), 0, lineNumber + 3, line.length),\\n\\t\\t\\t\\ttargetSelectionRange: new vscode.Range(lineNumber, metadataOffset, lineNumber, metadataOffset),\\n\\t\\t\\t\\ttargetUri: currentTarget,\\n\\t\\t\\t\\toriginSelectionRange: new vscode.Range(i, resultStart, i, line.length),\\n\\t\\t\\t};\\n\\n\\t\\t\\tcurrentTargetLocations?.push(location);\\n\\n\\t\\t\\tlinks[i] = { type: 'result', location, isContext: seperator === ' ', prefixRange: new vscode.Range(i, 0, i, metadataOffset) };\\n\\t\\t}\\n\\t}\\n\\n\\tcachedLastParse = {\\n\\t\\tversion: document.version,\\n\\t\\tparse: links,\\n\\t\\turi: document.uri\\n\\t};\\n\\n\\treturn links;\\n}\\n\",\"module.exports = require(\\\"vscode\\\");\",\"module.exports = require(\\\"path\\\");\"]}","code":"!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const i=n(1),r=n(2),o=/^(\\S.*):$/,a=/^(\\s+)(\\d+)(:| )(\\s+)(.*)$/,l={language:\"search-result\"},c=[\"# Query:\",\"# Flags:\",\"# Including:\",\"# Excluding:\",\"# ContextLines:\"],s=[\"RegExp\",\"CaseSensitive\",\"IgnoreExcludeSettings\",\"WordMatch\"];let u,d;function f(e,t){if(r.isAbsolute(e))return i.Uri.file(e);if(0===e.indexOf(\"~/\"))return i.Uri.file(r.join(process.env.HOME,e.slice(2)));if(i.workspace.workspaceFolders){const n=/^(.*) • (.*)$/.exec(e);if(n){const[,e,t]=n,o=i.workspace.workspaceFolders.filter(t=>t.name===e)[0];if(o)return i.Uri.file(r.join(o.uri.fsPath,t))}else{if(1===i.workspace.workspaceFolders.length)return i.Uri.file(r.join(i.workspace.workspaceFolders[0].uri.fsPath,e));if(\"untitled\"!==t.scheme){const n=i.workspace.workspaceFolders.filter(e=>t.toString().startsWith(e.uri.toString()))[0];if(n)return i.Uri.file(r.join(n.uri.fsPath,e))}}}console.error(`Unable to resolve path ${e}`)}t.activate=function(e){const t=i.window.createTextEditorDecorationType({opacity:\"0.7\"}),n=i.window.createTextEditorDecorationType({fontWeight:\"bold\"}),r=e=>{const i=v(e.document).filter(p),r=i.filter(e=>e.isContext).map(e=>e.prefixRange),o=i.filter(e=>!e.isContext).map(e=>e.prefixRange);e.setDecorations(t,r),e.setDecorations(n,o)};i.window.activeTextEditor&&\"search-result\"===i.window.activeTextEditor.document.languageId&&r(i.window.activeTextEditor),e.subscriptions.push(i.languages.registerDocumentSymbolProvider(l,{provideDocumentSymbols:(e,t)=>v(e,t).filter(g).map(e=>new i.DocumentSymbol(e.path,\"\",i.SymbolKind.File,e.allLocations.map(({originSelectionRange:e})=>e).reduce((e,t)=>e.union(t),e.location.originSelectionRange),e.location.originSelectionRange))}),i.languages.registerCompletionItemProvider(l,{provideCompletionItems(e,t){const n=e.lineAt(t.line);if(t.line>3)return[];if(0===t.character||1===t.character&&\"#\"===n.text){const n=Array.from({length:c.length}).map((t,n)=>e.lineAt(n).text);return c.filter(e=>n.every(t=>-1===t.indexOf(e))).map(e=>({label:e,insertText:e.slice(t.character)+\" \"}))}return-1===n.text.indexOf(\"# Flags:\")?[]:s.filter(e=>-1===n.text.indexOf(e)).map(e=>({label:e,insertText:e+\" \"}))}},\"#\"),i.languages.registerDefinitionProvider(l,{provideDefinition(e,t,n){const r=v(e,n)[t.line];return r?\"file\"===r.type?r.allLocations:[{...r.location,targetSelectionRange:((e,t)=>e.with({start:new i.Position(e.start.line,Math.max(0,t-e.start.character)),end:new i.Position(e.end.line,Math.max(0,t-e.end.character))}))(r.location.targetSelectionRange,t.character-1)}]:[]}}),i.languages.registerDocumentLinkProvider(l,{provideDocumentLinks:async(e,t)=>v(e,t).filter(({type:e})=>\"file\"===e).map(({location:e})=>({range:e.originSelectionRange,target:e.targetUri}))}),i.window.onDidChangeActiveTextEditor(e=>{\"search-result\"===(null===e||void 0===e?void 0:e.document.languageId)&&(u=void 0,null===d||void 0===d||d.dispose(),d=i.workspace.onDidChangeTextDocument(t=>{t.document.uri===e.document.uri&&r(e)}),r(e))}),{dispose(){u=void 0,null===d||void 0===d||d.dispose()}})};const g=e=>\"file\"===e.type,p=e=>\"result\"===e.type;function v(e,t){if(u&&u.uri===e.uri&&u.version===e.version)return u.parse;const n=e.getText().split(/\\r?\\n/),r=[];let l=void 0,c=void 0;for(let s=0;s<n.length;s++){if(null===t||void 0===t?void 0:t.isCancellationRequested)return[];const u=n[s],d=o.exec(u);if(d){const[,t]=d;if(!(l=f(t,e.uri)))continue;c=[];const n={targetRange:new i.Range(0,0,0,1),targetUri:l,originSelectionRange:new i.Range(s,0,s,u.length)};r[s]={type:\"file\",location:n,allLocations:c,path:t}}if(!l)continue;const g=a.exec(u);if(g){const[,e,t,n,o]=g,a=+t-1,d=(e+t+n+o).length,f=(e+t+n).length,p={targetRange:new i.Range(Math.max(a-3,0),0,a+3,u.length),targetSelectionRange:new i.Range(a,f,a,f),targetUri:l,originSelectionRange:new i.Range(s,d,s,u.length)};null===c||void 0===c||c.push(p),r[s]={type:\"result\",location:p,isContext:\" \"===n,prefixRange:new i.Range(s,0,s,f)}}}return u={version:e.version,parse:r,uri:e.uri},r}},function(e,t){e.exports=require(\"vscode\")},function(e,t){e.exports=require(\"path\")}]));","extractedComments":[]}