{"version":3,"sources":["vs/base/common/performance.js"],"names":["_factory","sharedObj","_performanceEntries","_dataLen","_timeStamp","console","timeStamp","bind","mark","name","push","Date","now","getEntries","result","entries","i","length","timestamp","getEntry","getDuration","from","to","target","endIndex","importEntries","splice","exportEntries","slice","global","self","define","module","exports"],"mappings":";;;;AAKA,aAIA,SAASA,SAASC,GAEjBA,EAAUC,oBAAsBD,EAAUC,qBAAuB,GAEjE,MAAMC,EAAW,EACXC,EAA0C,mBAAtBC,QAAQC,UAA2BD,QAAQC,UAAUC,KAAKF,SAAW,OAmE/F,MATgB,CACfG,KAND,SAAcC,GACbR,EAAUC,oBAAoBQ,KAAKD,EAAME,KAAKC,OAC9CR,EAAWK,IAKXI,WAlDD,WACC,MAAMC,EAAS,GACTC,EAAUd,EAAUC,oBAC1B,IAAK,IAAIc,EAAI,EAAGA,EAAID,EAAQE,OAAQD,GAAKb,EACxCW,EAAOJ,KAAK,CACXD,KAAMM,EAAQC,GACdE,UAAWH,EAAQC,EAAI,KAGzB,OAAOF,GA0CPK,SAvCD,SAAkBV,GACjB,MAAMM,EAAUd,EAAUC,oBAC1B,IAAK,IAAIc,EAAI,EAAGA,EAAID,EAAQE,OAAQD,GAAKb,EACxC,GAAIY,EAAQC,KAAOP,EAClB,MAAO,CACNA,KAAMM,EAAQC,GACdE,UAAWH,EAAQC,EAAI,KAkC1BI,YA5BD,SAAqBC,EAAMC,GAC1B,MAAMP,EAAUd,EAAUC,oBAC1B,IAAIqB,EAASD,EACTE,EAAW,EACf,IAAK,IAAIR,EAAID,EAAQE,OAASd,EAAUa,GAAK,EAAGA,GAAKb,EACpD,GAAIY,EAAQC,KAAOO,EAAQ,CAC1B,GAAIA,IAAWD,EAMd,OAAOP,EAAQS,EAAW,GAAKT,EAAQC,EAAI,GAJ3CQ,EAAWR,EACXO,EAASF,EAOZ,OAAO,GAaPI,cA7DD,SAAuBV,GACtBd,EAAUC,oBAAoBwB,OAAO,EAAG,KAAMX,IA6D9CY,cA1DD,WACC,OAAO1B,EAAUC,oBAAoB0B,MAAM,KAmE7C,IAAI3B,UAGHA,UAFqB,iBAAX4B,OAEEA,OACc,iBAATC,KAELA,KAEA,GAGS,mBAAXC,OAEVA,OAAO,IAAI,WAAc,OAAO/B,SAASC;IACb,iBAAX+B,QAAiD,iBAAnBA,OAAOC,UAEtDD,OAAOC,QAAUjC,SAASC","file":"performance.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\n//@ts-check\n\nfunction _factory(sharedObj) {\n\n\tsharedObj._performanceEntries = sharedObj._performanceEntries || [];\n\n\tconst _dataLen = 2;\n\tconst _timeStamp = typeof console.timeStamp === 'function' ? console.timeStamp.bind(console) : () => { };\n\n\tfunction importEntries(entries) {\n\t\tsharedObj._performanceEntries.splice(0, 0, ...entries);\n\t}\n\n\tfunction exportEntries() {\n\t\treturn sharedObj._performanceEntries.slice(0);\n\t}\n\n\tfunction getEntries() {\n\t\tconst result = [];\n\t\tconst entries = sharedObj._performanceEntries;\n\t\tfor (let i = 0; i < entries.length; i += _dataLen) {\n\t\t\tresult.push({\n\t\t\t\tname: entries[i],\n\t\t\t\ttimestamp: entries[i + 1],\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction getEntry(name) {\n\t\tconst entries = sharedObj._performanceEntries;\n\t\tfor (let i = 0; i < entries.length; i += _dataLen) {\n\t\t\tif (entries[i] === name) {\n\t\t\t\treturn {\n\t\t\t\t\tname: entries[i],\n\t\t\t\t\ttimestamp: entries[i + 1],\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getDuration(from, to) {\n\t\tconst entries = sharedObj._performanceEntries;\n\t\tlet target = to;\n\t\tlet endIndex = 0;\n\t\tfor (let i = entries.length - _dataLen; i >= 0; i -= _dataLen) {\n\t\t\tif (entries[i] === target) {\n\t\t\t\tif (target === to) {\n\t\t\t\t\t// found `to` (end of interval)\n\t\t\t\t\tendIndex = i;\n\t\t\t\t\ttarget = from;\n\t\t\t\t} else {\n\t\t\t\t\t// found `from` (start of interval)\n\t\t\t\t\treturn entries[endIndex + 1] - entries[i + 1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tfunction mark(name) {\n\t\tsharedObj._performanceEntries.push(name, Date.now());\n\t\t_timeStamp(name);\n\t}\n\n\tconst exports = {\n\t\tmark: mark,\n\t\tgetEntries: getEntries,\n\t\tgetEntry: getEntry,\n\t\tgetDuration: getDuration,\n\t\timportEntries: importEntries,\n\t\texportEntries: exportEntries\n\t};\n\n\treturn exports;\n}\n\n// This module can be loaded in an amd and commonjs-context.\n// Because we want both instances to use the same perf-data\n// we store them globally\n\nlet sharedObj;\nif (typeof global === 'object') {\n\t// nodejs\n\tsharedObj = global;\n} else if (typeof self === 'object') {\n\t// browser\n\tsharedObj = self;\n} else {\n\tsharedObj = {};\n}\n\nif (typeof define === 'function') {\n\t// amd\n\tdefine([], function () { return _factory(sharedObj); });\n} else if (typeof module === 'object' && typeof module.exports === 'object') {\n\t// commonjs\n\tmodule.exports = _factory(sharedObj);\n} else {\n\t// invalid context...\n}\n"]}